/*! For license information please see main.c286120e.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,D=60115,P=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;_=V("react.element"),x=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),R=V("react.suspense_list"),D=V("react.memo"),P=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var W=!1;function K(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return G(e.type);case O:return G(e._render);case P:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Fe=!1,Ue=!1;function Ve(){null===Ce&&null===Ae||(Le(),De())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ke=null,He=!1,Ge=null,Qe={onError:function(e){We=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,u,s){We=!1,Ke=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),At=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Dt=new Map,Pt=new Map,Ot=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?jt(10,t):e;case 10:return 0===(e=qt(192&~t))?jt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Ht|0)|0},Kt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Fe||Le();var i=$t,a=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Xt(e,t,n,r){Qt(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(bn),xn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),Rn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(On),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Vn=f&&"TextEvent"in window&&!Un,jn=f&&(!Fn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Ar(e,0)}function $n(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&$n(Jn)){var t=[];if(Qn(t,Jn,e,Te(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Jn)}function sr(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==$(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ke;We=!1,Ke=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Rr]||(e[Rr]=!0,u.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Or(a,e,i,t),o.add(u))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Ct:case At:case Nt:s=wn;break;case Rt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Gn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[$r])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ai?Ai:function(){},Vi=null,ji=null,qi=!1,Bi=Ni(),zi=1e4>Bi?Ni:function(){return Ni()-Bi};function Wi(){switch(Ri()){case Di:return 99;case Pi:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Ki(e),Ei(e,t)}function Gi(e,t,n){return e=Ki(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ti(Di,Qi),n}finally{qi=!1}}}var Ji=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xs(t,e.mode,n)).return=e,t}if(_a(t)||B(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||B(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=B(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(B(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Da(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Oa(){li(Aa),li(Na),li(Ra)}function La(e){Da(Ra.current);var t=Da(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,qa=!1;function Ba(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Va=e);Ba(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Va=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ha(e){if(e!==Va)return!1;if(!qa)return Ka(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=ja;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){ja=Va=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,$a=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Do,t=null!==eo&&null!==eo.next,$a=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,qu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Wt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return wo(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Wi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ks(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ko(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,Yo,Jo,Xo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Da(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Aa.current),Ha(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?_e(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Ra.current),Da(Aa.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&qu)&&0===(134217727&Bu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$u?$u=new Set([this]):$u.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):Iu(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?_e(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ku=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Du=0,Pu=null,Ou=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,Vu=null,ju=0,qu=0,Bu=0,zu=0,Wu=null,Ku=0,Hu=1/0;function Gu(){Hu=zi()+500}var Qu,Yu=null,Ju=!1,Xu=null,$u=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Du)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===ss&&(ss=ju),0!==Ji.transition){0!==cs&&(cs=null!==Wu?Wu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Du)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(Bu|=t,4===Uu&&gs(e,Lu));var r=Wi();1===t?0!==(8&Du)&&0===(48&Du)?ks(e):(ys(e,n),0===Du&&(Gu(),Qi())):(0===(4&Du)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Wu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Wt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Ti(Di,Yi)):Vi.push(n),n=Fi):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Du))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Du;Du|=16;var a=Ts();for(Pu===e&&Lu===r||(Gu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(na(),Nu.current=a,Du=i,null!==Ou?r=0:(Pu=null,Lu=0,r=Uu),0!==(ju&Bu))Is(e,0);else if(0!==r){if(2===r&&(Du|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ss(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ds(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Ku+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Ds.bind(null,e),r);break}Ds(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Wt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Kr(Ds.bind(null,e),n);break}Ds(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Du))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&Bu)&&(n=Ss(e,t=Ut(e,t)))}else n=Ss(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Du|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ss(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e),ys(e,zi()),null}function ws(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&(Gu(),Qi())}}function bs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&(Gu(),Qi())}}function _s(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function xs(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xs()}n=n.return}Pu=e,Ou=Hs(e.current,null),Lu=Mu=ju=t,Uu=0,Vu=null,zu=Bu=qu=0}function Es(e,t){for(;;){var n=Ou;try{if(na(),Ja.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Za=null,ro=!1,Ru.current=null,null===n||null===n.return){Uu=1,Vu=t,Ou=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=qs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===$u||!$u.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(x){t=x,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function Ts(){var e=Nu.current;return Nu.current=Do,null===e?Do:e}function Ss(e,t){var n=Du;Du|=16;var r=Ts();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Du=n,Nu.current=r,null!==Ou)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Ou;)Ns(Ou)}function As(){for(;null!==Ou&&!Ci();)Ns(Ou)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Ou=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ou=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ou=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Uu&&(Uu=5)}function Ds(e){var t=Wi();return Hi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Du))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ou=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Du,Du|=32,Ru.current=null,qr=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Os()}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:_u(Yu),Yu.flags&=-3;break;case 6:_u(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var _=s.alternate;wu(s),null!==_&&wu(_)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=Br,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!b.extend&&_>u&&(s=u,u=_,_=s),s=pr(k,_),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!qr,Br=qr=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var x=Yu.flags;if(36&x&&mu(k,Yu.alternate,Yu),128&x){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Ui(),Du=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&($u=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),Ju)throw Ju=!1,e=Xu,Xu=null,e;return 0!==(8&Du)||Qi(),null}function Os(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Hi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Du))throw Error(o(331));var t=Du;Du|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Du=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Ku?Is(e,0):zu|=n),ys(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===ss&&(ss=ju),0===(t=qt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(e,t,n,r){return new zs(e,t,n,r)}function Ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Ws(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ks(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ws(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Ws(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Ws(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Ys(n,i,a,t);case U:return(e=Ws(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case A:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e;case O:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ws(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ws(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ws(23,e,r,t)).elementType=F,e.lanes=n,e}function Js(e,t,n){return(e=Ws(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ws(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $s(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $s(e,t,null!=n&&!0===n.hydrate),t=Ws(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Wr(r,i)?u=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return $o(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),jo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Oe=function(e,t,n,r,i){var a=Du;Du|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&(Gu(),Qi())}},Le=function(){0===(49&Du)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Re,De,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Du;if(0!==(48&n))return e(t);Du|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Du=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,D=!1,P=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(P=!1,O(e),!D)if(null!==x(T))D=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){D=!1,P&&(P=!1,i()),R=!0;var a=N;try{for(O(n),A=x(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===x(T)&&I(T),O(n)}else I(T);A=x(T)}if(null!==A)var s=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||R||(D=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),D||R||(D=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return K},SDK_VERSION:function(){return Be},_DEFAULT_ENTRY_NAME:function(){return Se},_addComponent:function(){return Re},_addOrOverwriteComponent:function(){return De},_apps:function(){return Ae},_clearComponents:function(){return Me},_components:function(){return Ne},_getProvider:function(){return Oe},_registerComponent:function(){return Pe},_removeServiceInstance:function(){return Le},deleteApp:function(){return He},getApp:function(){return We},getApps:function(){return Ke},initializeApp:function(){return ze},onLog:function(){return Ye},registerVersion:function(){return Qe},setLogLevel:function(){return Je}});var t=n(791),r=n(164);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||a(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&f(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function g(e){var t=p();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}var k=n(184),w=function(e){var t=e.totalIncome,n=e.totalExpenses,r=e.totalBalance;return(0,k.jsxs)("section",{className:"total",children:[(0,k.jsxs)("header",{className:"total__header",children:[(0,k.jsx)("h3",{children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),(0,k.jsxs)("p",{className:"total__balance",children:[r," \u20bd"]})]}),(0,k.jsxs)("div",{className:"total__main",children:[(0,k.jsxs)("div",{className:"total__main-item total__income",children:[(0,k.jsx)("h4",{children:"\u0414\u043e\u0445\u043e\u0434\u044b"}),(0,k.jsxs)("p",{className:"total__money total__money-income",children:[t," \u20bd"]})]}),(0,k.jsxs)("div",{className:"total__main-item total__expenses",children:[(0,k.jsx)("h4",{children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"}),(0,k.jsxs)("p",{className:"total__money total__money-expenses",children:[n," \u20bd"]})]})]})]})},b=function(e){var t=e.transaction,n=e.deleteTransaction;return(0,k.jsxs)("li",{className:"history__item ".concat(t.add?"history__item-plus":"history__item-minus"),children:[t.description,(0,k.jsxs)("span",{className:"history__money",children:[t.moneyAmount," \u20bd"]}),(0,k.jsx)("button",{className:"history__delete",onClick:function(){return n(t.id)},children:"x"})]})},_=function(e){var t=e.transactions,n=e.deleteTransaction;return(0,k.jsxs)("section",{className:"history",children:[(0,k.jsx)("h3",{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432"}),(0,k.jsx)("ul",{className:"history__list",children:t.map((function(e){return(0,k.jsx)(b,{transaction:e,deleteTransaction:n},e.id)}))})]})};function x(e){var t=e.addTransaction,n=e.addDescription,r=e.addAmount,i=e.description,a=e.moneyAmount;return(0,k.jsxs)("section",{className:"operation",children:[(0,k.jsx)("h3",{children:"\u041d\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f"}),(0,k.jsxs)("form",{id:"form",children:[(0,k.jsx)("label",{children:(0,k.jsx)("input",{onChange:n,type:"text",className:"operation__fields operation__name",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",value:i})}),(0,k.jsx)("label",{children:(0,k.jsx)("input",{onChange:r,type:"number",className:"operation__fields operation__amount",value:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443"})}),(0,k.jsxs)("div",{className:"operation__btns",children:[(0,k.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"operation__btn operation__btn-subtract",children:"\u0420\u0410\u0421\u0425\u041e\u0414"}),(0,k.jsx)("button",{onClick:function(){return t(!0)},type:"button",className:"operation__btn operation__btn-add",children:"\u0414\u041e\u0425\u041e\u0414"})]})]})]})}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function T(e){if(Array.isArray(e))return e}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){return T(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||S()}function A(e,t,n){return A=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&f(i,n.prototype),i},A.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},N(e)}var R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},P=function(e){return function(e){var t=R(e);return D.encodeByteArray(t,!0)}(e).replace(/\./g,"")},O=function(e){try{return D.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function L(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=L(e[n],t[n]));return e}var M=function(){function e(){var t=this;s(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return l(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[P(JSON.stringify({alg:"none",type:"JWT"})),P(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())}function j(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function q(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function B(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function z(){var e=U();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function W(){return"object"===typeof indexedDB}var K=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),H.prototype.create),a}return n}(N(Error)),H=function(){function e(t,n,r){s(this,e),this.service=t,this.serviceName=n,this.errors=r}return l(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?G(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new K(n,a,t);return o}}]),e}();function G(e,t){return e.replace(Q,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Q=/\{\$([^}]+)}/g;function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function J(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(X(u)&&X(s)){if(!J(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function X(e){return null!==e&&"object"===typeof e}function $(e){for(var t=[],n=function(){var e=C(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Z(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=C(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ee(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function te(e,t){var n=new ne(e,t);return n.subscribe.bind(n)}var ne=function(){function e(t,n){var r=this;s(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return l(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=E(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=re),void 0===r.error&&(r.error=re),void 0===r.complete&&(r.complete=re);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function re(){}function ie(e){return e&&e._delegate?e._delegate:e}function ae(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ae(a,r,i,o,u,"next",e)}function u(e){ae(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ue=n(757),se=n.n(ue),ce=function(){function e(t,n,r){s(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return l(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),le="[DEFAULT]",fe=function(){function e(t,n){s(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return l(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new M;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(s){}var t,n=E(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=C(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=oe(ue.mark((function e(){var t;return ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(u(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),u(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=E(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=C(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ow){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===le?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ow){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var he,de,pe=function(){function e(t){s(this,e),this.name=t,this.providers=new Map}return l(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ve=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(de||(de={}));var ye,me,ge={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ke=de.INFO,we=(I(he={},de.DEBUG,"log"),I(he,de.VERBOSE,"log"),I(he,de.INFO,"info"),I(he,de.WARN,"warn"),I(he,de.ERROR,"error"),he),be=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=we[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},_e=function(){function e(t){s(this,e),this.name=t,this._logLevel=ke,this._logHandler=be,this._userLogHandler=null,ve.push(this)}return l(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in de))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ge[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.DEBUG].concat(t)),this._logHandler.apply(this,[this,de.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.VERBOSE].concat(t)),this._logHandler.apply(this,[this,de.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.INFO].concat(t)),this._logHandler.apply(this,[this,de.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.WARN].concat(t)),this._logHandler.apply(this,[this,de.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.ERROR].concat(t)),this._logHandler.apply(this,[this,de.ERROR].concat(t))}}]),e}();var xe=function(){function e(t){s(this,e),this.container=t}return l(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ie="@firebase/app",Ee="0.7.11",Te=new _e("@firebase/app"),Se="[DEFAULT]",Ce=(I(ye={},Ie,"fire-core"),I(ye,"@firebase/app-compat","fire-core-compat"),I(ye,"@firebase/analytics","fire-analytics"),I(ye,"@firebase/analytics-compat","fire-analytics-compat"),I(ye,"@firebase/app-check","fire-app-check"),I(ye,"@firebase/app-check-compat","fire-app-check-compat"),I(ye,"@firebase/auth","fire-auth"),I(ye,"@firebase/auth-compat","fire-auth-compat"),I(ye,"@firebase/database","fire-rtdb"),I(ye,"@firebase/database-compat","fire-rtdb-compat"),I(ye,"@firebase/functions","fire-fn"),I(ye,"@firebase/functions-compat","fire-fn-compat"),I(ye,"@firebase/installations","fire-iid"),I(ye,"@firebase/installations-compat","fire-iid-compat"),I(ye,"@firebase/messaging","fire-fcm"),I(ye,"@firebase/messaging-compat","fire-fcm-compat"),I(ye,"@firebase/performance","fire-perf"),I(ye,"@firebase/performance-compat","fire-perf-compat"),I(ye,"@firebase/remote-config","fire-rc"),I(ye,"@firebase/remote-config-compat","fire-rc-compat"),I(ye,"@firebase/storage","fire-gcs"),I(ye,"@firebase/storage-compat","fire-gcs-compat"),I(ye,"@firebase/firestore","fire-fst"),I(ye,"@firebase/firestore-compat","fire-fst-compat"),I(ye,"fire-js","fire-js"),I(ye,"firebase","fire-js-all"),ye),Ae=new Map,Ne=new Map;function Re(e,t){try{e.container.addComponent(t)}catch(n){Te.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function De(e,t){e.container.addOrOverwriteComponent(t)}function Pe(e){var t=e.name;if(Ne.has(t))return Te.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ne.set(t,e);var n,r=E(Ae.values());try{for(r.s();!(n=r.n()).done;){Re(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Oe(e,t){return e.container.getProvider(t)}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;Oe(e,t).clearInstance(n)}function Me(){Ne.clear()}var Fe,Ue,Ve=(I(me={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(me,"bad-app-name","Illegal App name: '{$appName}"),I(me,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),I(me,"app-deleted","Firebase App named '{$appName}' already deleted"),I(me,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),I(me,"invalid-log-argument","First argument to `onLog` must be null or a function."),me),je=new H("app","Firebase",Ve),qe=function(){function e(t,n,r){var i=this;s(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ce("app",(function(){return i}),"PUBLIC"))}return l(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw je.create("app-deleted",{appName:this._name})}}]),e}(),Be="9.6.1";function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Se,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw je.create("bad-app-name",{appName:String(i)});var a=Ae.get(i);if(a){if(J(e,a.options)&&J(r,a.config))return a;throw je.create("duplicate-app",{appName:i})}var o,u=new pe(i),s=E(Ne.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new qe(e,r,u);return Ae.set(i,l),l}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=Ae.get(e);if(!t)throw je.create("no-app",{appName:e});return t}function Ke(){return Array.from(Ae.values())}function He(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=oe(ue.mark((function e(t){var n;return ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ae.has(n)){e.next=6;break}return Ae.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t,n){var r,i=null!==(r=Ce[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Te.warn(u.join(" "))}Pe(new ce("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ye(e,t){if(null!==e&&"function"!==typeof e)throw je.create("invalid-log-argument");!function(e,t){var n,r=E(ve);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ge[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:de[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Je(e){var t;t=e,ve.forEach((function(e){e.setLogLevel(t)}))}Fe="",Pe(new ce("platform-logger",(function(e){return new xe(e)}),"PRIVATE")),Qe(Ie,Ee,Fe),Qe(Ie,Ee,"esm2017"),Qe("fire-js","");var Xe=function(){function e(t,n){var r=this;s(this,e),this._delegate=t,this.firebase=n,Re(t,new ce("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return l(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),He(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Re(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){De(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),$e=(I(Ue={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(Ue,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ue),Ze=new H("app-compat","Firebase",$e);var et=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Y(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Qe,setLogLevel:Je,onLog:Ye,apps:null,SDK_VERSION:Be,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Pe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ze.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&L(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Y(n,e=e||Se))throw Ze.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Xe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){L(n,e)},createSubscribe:te,ErrorFactory:H,deepExtend:L}),n}(),tt=new _e("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){tt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&tt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var rt=et;!function(e){Qe("@firebase/app-compat","0.1.12",e)}();function it(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function at(){return at="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=it(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},at.apply(this,arguments)}rt.registerVersion("firebase","9.6.1","app-compat");function ot(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ut;Object.create;var st="facebook.com",ct="github.com",lt="google.com",ft="password",ht="twitter.com",dt="EMAIL_SIGNIN",pt="PASSWORD_RESET",vt="RECOVER_EMAIL",yt="REVERT_SECOND_FACTOR_ADDITION",mt="VERIFY_AND_CHANGE_EMAIL",gt="VERIFY_EMAIL";function kt(){return I({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var wt=function(){var e;return I(e={},"admin-restricted-operation","This operation is restricted to administrators only."),I(e,"argument-error",""),I(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),I(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),I(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),I(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),I(e,"cordova-not-ready","Cordova framework is not ready."),I(e,"cors-unsupported","This browser is not supported."),I(e,"credential-already-in-use","This credential is already associated with a different user account."),I(e,"custom-token-mismatch","The custom token corresponds to a different audience."),I(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),I(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),I(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),I(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),I(e,"email-already-in-use","The email address is already in use by another account."),I(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),I(e,"expired-action-code","The action code has expired."),I(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),I(e,"internal-error","An internal AuthError has occurred."),I(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),I(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),I(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),I(e,"invalid-auth-event","An internal AuthError has occurred."),I(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),I(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),I(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),I(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),I(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),I(e,"invalid-email","The email address is badly formatted."),I(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),I(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),I(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),I(e,"invalid-credential","The supplied auth credential is malformed or has expired."),I(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),I(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),I(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),I(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),I(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),I(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),I(e,"wrong-password","The password is invalid or the user does not have a password."),I(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),I(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),I(e,"invalid-provider-id","The specified provider ID is invalid."),I(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),I(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),I(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),I(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),I(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),I(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),I(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),I(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),I(e,"missing-continue-uri","A continue URL must be provided in the request."),I(e,"missing-iframe-start","An internal AuthError has occurred."),I(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),I(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),I(e,"missing-multi-factor-info","No second factor identifier is provided."),I(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),I(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),I(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),I(e,"app-deleted","This instance of FirebaseApp has been deleted."),I(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),I(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),I(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),I(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),I(e,"no-auth-event","An internal AuthError has occurred."),I(e,"no-such-provider","User was not linked to an account with the given provider."),I(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),I(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),I(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),I(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),I(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),I(e,"provider-already-linked","User can only be linked to one identity for the given provider."),I(e,"quota-exceeded","The project's quota for this operation has been exceeded."),I(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),I(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),I(e,"rejected-credential","The request contains malformed or mismatching credentials."),I(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),I(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),I(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),I(e,"timeout","The operation has timed out."),I(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),I(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),I(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),I(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),I(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),I(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),I(e,"unverified-email","The operation requires a verified email."),I(e,"user-cancelled","The user did not grant your application the permissions it requested."),I(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),I(e,"user-disabled","The user account has been disabled by an administrator."),I(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),I(e,"user-signed-out",""),I(e,"weak-password","The password must be 6 characters long or more."),I(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),I(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},bt=kt,_t=new H("auth","Firebase",kt()),xt=new _e("@firebase/auth");function It(e){if(xt.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.error.apply(xt,["Auth (".concat(Be,"): ").concat(e)].concat(n))}}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw At.apply(void 0,[e].concat(n))}function Tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return At.apply(void 0,[e].concat(n))}function St(e,t,n){var r=Object.assign(Object.assign({},bt()),I({},t,n));return new H("auth","Firebase",r).create(t,{appName:e.name})}function Ct(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Et(e,"argument-error"),St(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=u(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(u(o)))}return _t.create.apply(_t,[e].concat(n))}function Nt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw At.apply(void 0,[t].concat(r))}}function Rt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw It(t),new Error(t)}function Dt(e,t){e||Rt(t)}var Pt=new Map;function Ot(e){Dt(e instanceof Function,"Expected a class definition");var t=Pt.get(e);return t?(Dt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pt.set(e,t),t)}function Lt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mt(){return"http:"===Ft()||"https:"===Ft()}function Ft(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ut=function(){function e(t,n){s(this,e),this.shortDelay=t,this.longDelay=n,Dt(n>t,"Short delay should be less than long delay!"),this.isMobile=V()||B()}return l(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mt()||q()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Vt(e,t){Dt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var jt=function(){function e(){s(this,e)}return l(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Rt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Rt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Rt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),qt=(I(ut={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),I(ut,"MISSING_CUSTOM_TOKEN","internal-error"),I(ut,"INVALID_IDENTIFIER","invalid-email"),I(ut,"MISSING_CONTINUE_URI","internal-error"),I(ut,"INVALID_PASSWORD","wrong-password"),I(ut,"MISSING_PASSWORD","internal-error"),I(ut,"EMAIL_EXISTS","email-already-in-use"),I(ut,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),I(ut,"INVALID_IDP_RESPONSE","invalid-credential"),I(ut,"INVALID_PENDING_TOKEN","invalid-credential"),I(ut,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),I(ut,"MISSING_REQ_TYPE","internal-error"),I(ut,"EMAIL_NOT_FOUND","user-not-found"),I(ut,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),I(ut,"EXPIRED_OOB_CODE","expired-action-code"),I(ut,"INVALID_OOB_CODE","invalid-action-code"),I(ut,"MISSING_OOB_CODE","internal-error"),I(ut,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),I(ut,"INVALID_ID_TOKEN","invalid-user-token"),I(ut,"TOKEN_EXPIRED","user-token-expired"),I(ut,"USER_NOT_FOUND","user-token-expired"),I(ut,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),I(ut,"INVALID_CODE","invalid-verification-code"),I(ut,"INVALID_SESSION_INFO","invalid-verification-id"),I(ut,"INVALID_TEMPORARY_PROOF","invalid-credential"),I(ut,"MISSING_SESSION_INFO","missing-verification-id"),I(ut,"SESSION_EXPIRED","code-expired"),I(ut,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),I(ut,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),I(ut,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),I(ut,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),I(ut,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),I(ut,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),I(ut,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),I(ut,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),I(ut,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),I(ut,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),I(ut,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ut),Bt=new Ut(3e4,6e4);function zt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Wt(e,t,n,r){return Kt.apply(this,arguments)}function Kt(){return Kt=oe(se().mark((function e(t,n,r,i){var a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ht(t,a,oe(se().mark((function e(){var a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=$(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",jt.fetch()(Jt(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Kt.apply(this,arguments)}function Ht(e,t,n){return Gt.apply(this,arguments)}function Gt(){return(Gt=oe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},qt),n),e.prev=2,a=new Xt(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw $t(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=C(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw $t(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw $t(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw St(t,d,h);case 30:Et(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof K)){e.next=37;break}throw e.t0;case 37:Et(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Qt(e,t,n,r){return Yt.apply(this,arguments)}function Yt(){return Yt=oe(se().mark((function e(t,n,r,i){var a,o,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Wt(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Et(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Jt(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Vt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Xt=function(){function e(t){var n=this;s(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Tt(n.auth,"timeout"))}),Bt.get())}))}return l(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function $t(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Tt(e,t,r);return i.customData._tokenResponse=n,i}function Zt(e,t){return en.apply(this,arguments)}function en(){return(en=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function un(){return un=oe(se().mark((function e(t){var n,r,i,a,o,u,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ie(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Nt((a=cn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:on(sn(a.auth_time)),issuedAtTime:on(sn(a.iat)),expirationTime:on(sn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),un.apply(this,arguments)}function sn(e){return 1e3*Number(e)}function cn(e){var t=C(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return It("JWT malformed, contained fewer than 3 sections"),null;try{var a=O(r);return a?JSON.parse(a):(It("Failed to decode base64 JWT payload"),null)}catch(o){return It("Caught error parsing JWT payload as JSON",o),null}}function ln(e,t){return fn.apply(this,arguments)}function fn(){return fn=oe(se().mark((function e(t,n){var r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof K&&hn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),fn.apply(this,arguments)}function hn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var dn=function(){function e(t){s(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return l(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),pn=function(){function e(t,n){s(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return l(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function vn(e){return yn.apply(this,arguments)}function yn(){return yn=oe(se().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ln(t,rn(r,{idToken:i}));case 6:Nt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?kn(o.providerUserInfo):[],s=gn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new pn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),yn.apply(this,arguments)}function mn(){return(mn=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie(t),e.next=3,vn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(u(n),u(t))}function kn(e){return e.map((function(e){var t=e.providerId,n=ot(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function wn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,{},oe(se().mark((function e(){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Jt(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",jt.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _n=function(){function e(){s(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return l(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Nt(e.idToken,"internal-error"),Nt("undefined"!==typeof e.idToken,"internal-error"),Nt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=cn(e);return Nt(t,"internal-error"),Nt("undefined"!==typeof t.exp,"internal-error"),Nt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=oe(se().mark((function e(t){var n,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Nt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Rt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Nt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Nt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Nt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function xn(e,t){Nt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var In=function(){function e(t){s(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ot(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new dn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new pn(a.createdAt||void 0,a.lastLoginAt||void 0)}return l(e,[{key:"getIdToken",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Nt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return un.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return mn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=oe(se().mark((function e(t){var n,r,i=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,vn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ln(this,Zt(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Nt(k&&x,t,"internal-error");var I=_n.fromJSON(this.name,x);Nt("string"===typeof k,t,"internal-error"),xn(f,t.name),xn(h,t.name),Nt("boolean"===typeof w,t,"internal-error"),Nt("boolean"===typeof b,t,"internal-error"),xn(d,t.name),xn(p,t.name),xn(v,t.name),xn(y,t.name),xn(m,t.name),xn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=oe(se().mark((function t(n,r){var i,a,o,u=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new _n).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,vn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),En=function(){function e(){s(this,e),this.type="NONE",this.storage={}}return l(e,[{key:"_isAvailable",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();En.type="NONE";var Tn=En;function Sn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Cn=function(){function e(t,n,r){s(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Sn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Sn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return l(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?In._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=oe(se().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ot(Tn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ot(Tn),u=Sn(i,n.config.apiKey,n.name),s=null,c=E(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=In._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function An(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ln(t))return"Blackberry";if(Mn(t))return"Webos";if(Rn(t))return"Safari";if((t.includes("chrome/")||Dn(t))&&!t.includes("edge/"))return"Chrome";if(On(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/firefox\//i.test(e)}function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/crios\//i.test(e)}function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iemobile/i.test(e)}function On(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/android/i.test(e)}function Ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/blackberry/i.test(e)}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/webos/i.test(e)}function Fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iphone|ipad|ipod/i.test(e)}function Un(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return Fn(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Vn(){return z()&&10===document.documentMode}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return Fn(e)||On(e)||Mn(e)||Ln(e)||/windows phone/i.test(e)||Pn(e)}function qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=An(U());break;case"Worker":t="".concat(An(U()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Be,"/").concat(r)}var Bn=function(){function e(t,n){s(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_t,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return l(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ot(t)),this._initializationPromise=this.queue(oe(se().mark((function r(){var i,a;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Cn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=oe(se().mark((function e(t){var n,r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Nt(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ie(t):null)&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=oe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ot(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new H("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Nt(n=t&&Ot(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Cn.create(this,[Ot(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=oe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Nt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qn(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function zn(e){return ie(e)}var Wn=function(){function e(t){var n=this;s(this,e),this.auth=t,this.observer=null,this.addObserver=te((function(e){return n.observer=e}))}return l(e,[{key:"next",get:function(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Kn(e,t,n){var r=zn(e);Nt(r._canInitEmulator,r,"emulator-config-failed"),Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Hn(t),o=function(e){var t=Hn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Gn(r.substr(a.length+1))}}var o=C(r.split(":"),2);return{host:o[0],port:Gn(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Hn(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gn(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Qn=function(){function e(t,n){s(this,e),this.providerId=t,this.signInMethod=n}return l(e,[{key:"toJSON",value:function(){return Rt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Rt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Rt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Rt("not implemented")}}]),e}();function Yn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:resetPassword",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e,t){return $n.apply(this,arguments)}function $n(){return($n=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return(er=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:update",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e,t){return nr.apply(this,arguments)}function nr(){return(nr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithPassword",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return(ir=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:sendOobCode",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e,t){return or.apply(this,arguments)}function or(){return(or=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e,t){return sr.apply(this,arguments)}function sr(){return(sr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t){return lr.apply(this,arguments)}function lr(){return(lr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return(pr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return(yr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mr=function(e){h(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return s(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return l(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",tr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",dr(t,{email:this._email,oobCode:this._password}));case 5:Et(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Xn(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Et(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Qn);function gr(e,t){return kr.apply(this,arguments)}function kr(){return(kr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithIdp",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wr=function(e){h(n,e);var t=g(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return l(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return gr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Et("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ot(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Qn);function br(e,t){return _r.apply(this,arguments)}function _r(){return(_r=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:sendVerificationCode",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(){return(xr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(){return(Ir=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw $t(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Er=I({},"USER_NOT_FOUND","user-not-found");function Tr(){return(Tr=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,r),Er));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sr=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone","phone")).params=e,r}return l(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return xr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ir.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Tr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Qn);var Cr=function(){function e(t){var n,r,i,a,o,u;s(this,e);var c=Z(ee(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Nt(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return l(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Z(ee(e)).link,n=t?Z(ee(t)).deep_link_id:null,r=Z(ee(e)).deep_link_id;return(r?Z(ee(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Ow){return null}}}]),e}();var Ar=function(){function e(){s(this,e),this.providerId=e.PROVIDER_ID}return l(e,null,[{key:"credential",value:function(e,t){return mr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Cr.parseLink(t);return Nt(n,"argument-error"),mr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ar.PROVIDER_ID="password",Ar.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ar.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Nr=function(){function e(t){s(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return l(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Rr=function(e){h(n,e);var t=g(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).scopes=[],e}return l(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(Nr),Dr=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Nt(e.idToken||e.accessToken,"argument-error"),wr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Nt("providerId"in t&&"signInMethod"in t,"argument-error"),wr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Rr),Pr=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.call(this,"facebook.com")}return l(n,null,[{key:"credential",value:function(e){return wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ow){return null}}}]),n}(Rr);Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pr.PROVIDER_ID="facebook.com";var Or=function(e){h(n,e);var t=g(n);function n(){var e;return s(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return l(n,null,[{key:"credential",value:function(e,t){return wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Ow){return null}}}]),n}(Rr);Or.GOOGLE_SIGN_IN_METHOD="google.com",Or.PROVIDER_ID="google.com";var Lr=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.call(this,"github.com")}return l(n,null,[{key:"credential",value:function(e){return wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ow){return null}}}]),n}(Rr);Lr.GITHUB_SIGN_IN_METHOD="github.com",Lr.PROVIDER_ID="github.com";var Mr=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return l(n,[{key:"_getIdTokenResponse",value:function(e){return gr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Qn),Fr=function(e){h(n,e);var t=g(n);function n(e){return s(this,n),Nt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return l(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Mr.fromJSON(e);return Nt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Mr._create(r,n)}catch(i){return null}}}]),n}(Nr),Ur=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.call(this,"twitter.com")}return l(n,null,[{key:"credential",value:function(e,t){return wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Ow){return null}}}]),n}(Rr);function Vr(e,t){return jr.apply(this,arguments)}function jr(){return(jr=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signUp",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ur.TWITTER_SIGN_IN_METHOD="twitter.com",Ur.PROVIDER_ID="twitter.com";var qr=function(){function e(t){s(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return l(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=oe(se().mark((function t(n,r,i){var a,o,u,s,c=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,In._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Br(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=oe(se().mark((function t(n,r,i){var a;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Br(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Br(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function zr(){return zr=oe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qr({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Vr(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qr._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}var Wr=function(e){h(n,e);var t=g(n);function n(e,r,i,a){var o,u;return s(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return l(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(K);function Kr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wr._fromErrorAndOperation(e,n,t,r);throw n}))}function Hr(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Gr(e,t){return Qr.apply(this,arguments)}function Qr(){return Qr=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,Xr(!0,r,n);case 3:return e.t0=tn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Hr(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Yr(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=oe(se().mark((function e(t,n){var r,i,a=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ln,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Xr(e,t,n){return $r.apply(this,arguments)}function $r(){return($r=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(n);case 2:i=Hr(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Nt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zr(e,t){return ei.apply(this,arguments)}function ei(){return ei=oe(se().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ln(t,Kr(i,a,n,t),r);case 6:return Nt((o=e.sent).idToken,i,"internal-error"),Nt(u=cn(o.idToken),i,"internal-error"),s=u.sub,Nt(t.uid===s,i,"user-mismatch"),e.abrupt("return",qr._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Et(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ei.apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=oe(se().mark((function e(t,n){var r,i,a,o,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Kr(t,i,n);case 4:return a=e.sent,e.next=7,qr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t){return ii.apply(this,arguments)}function ii(){return(ii=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(zn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(e,t){return oi.apply(this,arguments)}function oi(){return(oi=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,Xr(!1,r,n.providerId);case 3:return e.abrupt("return",Yr(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){return si.apply(this,arguments)}function si(){return(si=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(ie(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return(li=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(t,"POST","/v1/accounts:signInWithCustomToken",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(){return(fi=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,ci(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qr._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hi=function(){function e(t,n){s(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return l(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?di._fromServerResponse(e,t):Et(e,"internal-error")}}]),e}(),di=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return l(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(hi);function pi(e,t,n){var r;Nt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Nt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Nt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Nt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function vi(){return(vi=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),a={requestType:"PASSWORD_RESET",email:n},r&&pi(i,a,r),e.next=5,ur(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yi(){return(yi=oe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(ie(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(){return(mi=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(ie(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,Yn(r,{oobCode:n});case 3:i=e.sent,Nt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Nt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Nt(i.mfaInfo,r,"internal-error");case 13:Nt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=hi._fromServerResponse(zn(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(){return(wi=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(ie(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bi(e,t,n){return _i.apply(this,arguments)}function _i(){return(_i=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),e.next=3,Vr(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,qr._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xi(){return(xi=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),a={requestType:"EMAIL_SIGNIN",email:n},Nt(r.handleCodeInApp,i,"argument-error"),r&&pi(i,a,r),e.next=6,cr(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(){return(Ii=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),Nt((a=Ar.credentialWithLink(n,r||Lt()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ri(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:createAuthUri",zt(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Si(){return(Si=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mt()?Lt():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ei(ie(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(){return(Ci=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&pi(r.auth,a,n),e.next=8,ar(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(){return(Ai=oe(se().mark((function e(t,n,r){var i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&pi(i.auth,o,r),e.next=8,fr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(){return(Di=oe(se().mark((function e(t,n){var r,i,a,o,u,s,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ie(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ln(a,Ni(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t,n){return Oi.apply(this,arguments)}function Oi(){return(Oi=oe(se().mark((function e(t,n,r){var i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ln(t,Xn(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Li=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},Mi=function(e){h(n,e);var t=g(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this,e,r,i)).username=a,o}return n}(Li),Fi=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"facebook.com",r)}return n}(Li),Ui=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return n}(Mi),Vi=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"google.com",r)}return n}(Li),ji=function(e){h(n,e);var t=g(n);function n(e,r,i){return s(this,n),t.call(this,e,"twitter.com",r,i)}return n}(Mi);function qi(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=cn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Li(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Fi(a,i);case"github.com":return new Ui(a,i);case"google.com":return new Vi(a,i);case"twitter.com":return new ji(a,i,e.screenName||null);case"custom":case"anonymous":return new Li(a,null);default:return new Li(a,r,i)}}(n)}var Bi=function(){function e(t,n){s(this,e),this.type=t,this.credential=n}return l(e,[{key:"toJSON",value:function(){return{multiFactorSession:I({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),zi=function(){function e(t,n,r){s(this,e),this.session=t,this.hints=n,this.signInResolver=r}return l(e,[{key:"resolveSignIn",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=zn(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return hi._fromServerResponse(r,e)}));Nt(i.mfaPendingCredential,r,"internal-error");var o=Bi._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=oe(se().mark((function e(t){var a,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qr._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Nt(n.user,r,"internal-error"),e.abrupt("return",qr._forOperation(n.user,n.operationType,u));case 17:Et(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Wi(e,t){return Wt(e,"POST","/v2/accounts/mfaEnrollment:start",zt(e,t))}var Ki=function(){function e(t){var n=this;s(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return hi._fromServerResponse(t.auth,e)})))}))}return l(e,[{key:"getSession",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Bi,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ln(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=oe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ln(this.user,Wt(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Hi=new WeakMap;var Gi="__sak",Qi=function(){function e(t,n){s(this,e),this.storageRetriever=t,this.type=n}return l(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Gi,"1"),this.storage.removeItem(Gi),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ow){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Yi=function(e){h(n,e);var t=g(n);function n(){var e;return s(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=U();return Rn(e)||Fn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=jn(),e._shouldAllowMigration=!0,e}return l(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Vn()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=oe(se().mark((function e(t,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(d(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=oe(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(d(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(d(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Qi);Yi.type="LOCAL";var Ji=Yi,Xi=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return l(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Qi);Xi.type="SESSION";var $i=Xi;function Zi(e){return Promise.all(e.map(function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ea=function(){function e(t){s(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return l(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=oe(se().mark((function e(t){var n,r,i,a,o,u,s,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Zi(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ta(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ea.receivers=[];var na=function(){function e(t){s(this,e),this.target=t,this.handlers=new Set}return l(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=oe(se().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ta("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ra(){return window}function ia(){return"undefined"!==typeof ra().WorkerGlobalScope&&"function"===typeof ra().importScripts}function aa(){return oa.apply(this,arguments)}function oa(){return(oa=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ua(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var sa="firebaseLocalStorageDb",ca="firebaseLocalStorage",la="fbase_key",fa=function(){function e(t){s(this,e),this.request=t}return l(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ha(e,t){return e.transaction([ca],t?"readwrite":"readonly").objectStore(ca)}function da(){var e=indexedDB.deleteDatabase(sa);return new fa(e).toPromise()}function pa(){var e=indexedDB.open(sa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ca,{keyPath:la})}catch(r){n(r)}})),e.addEventListener("success",oe(se().mark((function n(){var r;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ca)){n.next=12;break}return r.close(),n.next=5,da();case 5:return n.t0=t,n.next=8,pa();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function va(e,t,n){return ya.apply(this,arguments)}function ya(){return ya=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ha(t,!0).put((I(i={},la,n),I(i,"value",r),i)),e.abrupt("return",new fa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ma(e,t){return ga.apply(this,arguments)}function ga(){return ga=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ha(t,!1).get(n),e.next=3,new fa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){var n=ha(e,!0).delete(t);return new fa(n).toPromise()}var wa=function(){function e(){s(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return l(e,[{key:"_openDb",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,pa();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ia()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=oe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ea._getInstance(ia()?self:null),this.receiver._subscribe("keyChanged",function(){var e=oe(se().mark((function e(n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=oe(se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new na(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ua()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,pa();case 5:return t=e.sent,e.next=8,va(t,Gi,"1");case 8:return e.next=10,ka(t,Gi);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=oe(se().mark((function e(t,n){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return va(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ma(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=oe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ka(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=oe(se().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ha(e,!1).getAll();return new fa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=E(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();wa.type="LOCAL";var ba=wa;function _a(e,t){return Wt(e,"POST","/v2/accounts/mfaSignIn:start",zt(e,t))}function xa(e){return Ia.apply(this,arguments)}function Ia(){return(Ia=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Tt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ta(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Sa=1e12,Ca=function(){function e(t){s(this,e),this.auth=t,this.counter=Sa,this._widgets=new Map}return l(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Aa(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Sa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Sa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Sa,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Aa=function(){function e(t,n,r){var i=this;s(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Nt(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return l(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Na=Ta("rcb"),Ra=new Ut(3e4,6e4),Da="https://www.google.com/recaptcha/api.js?",Pa=function(){function e(){s(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ra().grecaptcha}return l(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Nt(Oa(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ra().grecaptcha):new Promise((function(r,i){var a=ra().setTimeout((function(){i(Tt(e,"network-request-failed"))}),Ra.get());ra()[Na]=function(){ra().clearTimeout(a),delete ra()[Na];var o=ra().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Tt(e,"internal-error"))},Ea("".concat(Da,"?").concat($({onload:Na,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Tt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ra().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Oa(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var La=function(){function e(){s(this,e)}return l(e,[{key:"load",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ca(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ma="recaptcha",Fa={theme:"light",type:"image"},Ua=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Fa),r=arguments.length>2?arguments[2]:void 0;s(this,e),this.parameters=n,this.type=Ma,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(r),this.isInvisible="invisible"===this.parameters.size,Nt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Nt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new La:new Pa,this.validateStartingState()}return l(e,[{key:"verify",value:function(){var e=oe(se().mark((function e(){var t,n,r,i=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Nt(!this.parameters.sitekey,this.auth,"argument-error"),Nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ra()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Nt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=oe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nt(Mt()&&!ia(),this.auth,"internal-error"),e.next=3,Va();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,xa(this.auth);case 8:Nt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Va(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ja=function(){function e(t,n){s(this,e),this.verificationId=t,this.onConfirmation=n}return l(e,[{key:"confirm",value:function(e){var t=Sr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function qa(){return(qa=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),e.next=3,Ka(i,n,ie(r));case 3:return a=e.sent,e.abrupt("return",new ja(a,(function(e){return ri(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(e,t,n){return za.apply(this,arguments)}function za(){return(za=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,Xr(!1,i,"phone");case 3:return e.next=5,Ka(i.auth,n,ie(r));case 5:return a=e.sent,e.abrupt("return",new ja(a,(function(e){return ai(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(){return(Wa=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,Ka(i.auth,n,ie(r));case 3:return a=e.sent,e.abrupt("return",new ja(a,(function(e){return ui(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(e,t,n){return Ha.apply(this,arguments)}function Ha(){return Ha=oe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Nt("string"===typeof a,t,"argument-error"),Nt(r.type===Ma,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Nt("enroll"===u.type,t,"internal-error"),e.next=13,Wi(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Nt("signin"===u.type,t,"internal-error"),Nt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,_a(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,br(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ha.apply(this,arguments)}function Ga(){return(Ga=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(ie(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qa=function(){function e(t){s(this,e),this.providerId=e.PROVIDER_ID,this.auth=zn(t)}return l(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ka(this.auth,e,ie(t))}}],[{key:"credential",value:function(e,t){return Sr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Sr._fromTokenResponse(n,r):null}}]),e}();function Ya(e,t){return t?Ot(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qa.PROVIDER_ID="phone",Qa.PHONE_SIGN_IN_METHOD="phone";var Ja=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,"custom","custom")).params=e,r}return l(n,[{key:"_getIdTokenResponse",value:function(e){return gr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return gr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return gr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Qn);function Xa(e){return ti(e.auth,new Ja(e),e.bypassAuthState)}function $a(e){var t=e.auth,n=e.user;return Nt(n,t,"internal-error"),Zr(n,new Ja(e),e.bypassAuthState)}function Za(e){return eo.apply(this,arguments)}function eo(){return(eo=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Nt(r=t.user,n,"internal-error"),e.abrupt("return",Yr(r,new Ja(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var to=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return l(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=oe(se().mark((function t(n,r){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=oe(se().mark((function e(t){var n,r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xa;case"linkViaPopup":case"linkViaRedirect":return Za;case"reauthViaPopup":case"reauthViaRedirect":return $a;default:Et(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),no=new Ut(2e3,1e4);function ro(e,t,n){return io.apply(this,arguments)}function io(){return(io=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),Ct(t,n,Nr),a=Ya(i,r),o=new so(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(){return(ao=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct((i=ie(t)).auth,n,Nr),a=Ya(i.auth,r),o=new so(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(e,t,n){return uo.apply(this,arguments)}function uo(){return(uo=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct((i=ie(t)).auth,n,Nr),a=Ya(i.auth,r),o=new so(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var so=function(e){h(n,e);var t=g(n);function n(e,r,i,a,o){var u;return s(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(u),u}return l(n,[{key:"executeNotNull",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Nt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=oe(se().mark((function e(){var t,n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt(1===this.filter.length,"Popup operations only handle one event"),t=ta(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Tt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Tt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Tt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,no.get())}()}}]),n}(to);so.currentPopupAction=null;var co=new Map,lo=function(e){h(n,e);var t=g(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return l(n,[{key:"execute",value:function(){var e=oe(se().mark((function e(){var t,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=co.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,fo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,at(d(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:co.set(this.auth._key(),t);case 21:return this.bypassAuthState||co.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=oe(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",at(d(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",at(d(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(to);function fo(e,t){return ho.apply(this,arguments)}function ho(){return(ho=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mo(n),i=yo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return(vo=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yo(t)._set(mo(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(e){return Ot(e._redirectPersistence)}function mo(e){return Sn("pendingRedirect",e.config.apiKey,e.name)}function go(e,t,n){return function(e,t,n){return ko.apply(this,arguments)}(e,t,n)}function ko(){return(ko=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),Ct(t,n,Nr),a=Ya(i,r),e.next=5,po(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t,n){return function(e,t,n){return bo.apply(this,arguments)}(e,t,n)}function bo(){return(bo=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct((i=ie(t)).auth,n,Nr),a=Ya(i.auth,r),e.next=5,po(a,i.auth);case 5:return e.next=7,Co(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e,t,n){return function(e,t,n){return xo.apply(this,arguments)}(e,t,n)}function xo(){return(xo=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct((i=ie(t)).auth,n,Nr),a=Ya(i.auth,r),e.next=5,Xr(!1,i,n.providerId);case 5:return e.next=7,po(a,i.auth);case 7:return e.next=9,Co(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(t)._initializationPromise;case 2:return e.abrupt("return",To(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(e,t){return So.apply(this,arguments)}function So(){return So=oe(se().mark((function e(t,n){var r,i,a,o,u,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=zn(t),a=Ya(i,n),o=new lo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Co(e){return Ao.apply(this,arguments)}function Ao(){return(Ao=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ta("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var No=function(){function e(t){s(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return l(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Do(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Do(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ro(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ro(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ro(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Do(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Po(e){return Oo.apply(this,arguments)}function Oo(){return Oo=oe(se().mark((function e(t){var n,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Wt(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}var Lo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mo=/^https?/;function Fo(){return(Fo=oe(se().mark((function e(t){var n,r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Po(t);case 4:n=e.sent,r=n.authorizedDomains,i=E(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Uo(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Et(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Uo(e){var t=Lt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Mo.test(r))return!1;if(Lo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Vo=new Ut(3e4,6e4);function jo(){var e=ra().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var qo=null;function Bo(e){return qo=qo||function(e){return new Promise((function(t,n){var r,i,a;function o(){jo(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){jo(),n(Tt(e,"network-request-failed"))},timeout:Vo.get()})}if(null===(i=null===(r=ra().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ra().gapi)||void 0===a?void 0:a.load)){var u=Ta("iframefcb");return ra()[u]=function(){gapi.load?o():n(Tt(e,"network-request-failed"))},Ea("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw qo=null,e}))}(e),qo}var zo=new Ut(5e3,15e3),Wo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ko=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ho(e){var t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Vt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Be},i=Ko.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat($(r).slice(1))}function Go(e){return Qo.apply(this,arguments)}function Qo(){return Qo=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(t);case 2:return n=e.sent,Nt(r=ra().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ho(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wo,dontclear:!0},(function(e){return new Promise(function(){var n=oe(se().mark((function n(r,i){var a,o,u;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ra().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Tt(t,"network-request-failed"),o=ra().setTimeout((function(){i(a)}),zo.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}var Yo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jo="_blank",Xo="http://localhost",$o=function(){function e(t){s(this,e),this.window=t,this.associatedEvent=null}return l(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Zo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Yo),{width:r.toString(),height:i.toString(),top:a,left:o}),c=U().toLowerCase();n&&(u=Dn(c)?Jo:n),Nn(c)&&(t=t||Xo,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=C(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Un(c)&&"_self"!==u)return eu(t||"",u),new $o(null);var f=window.open(t||"",u,l);Nt(f,e,"popup-blocked");try{f.focus()}catch(h){}return new $o(f)}function eu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var tu="__/auth/handler",nu="emulator/auth/handler";function ru(e,t,n,r,i,a){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Be,eventId:i};if(t instanceof Nr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=C(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Rr){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(tu);return Vt(t,nu)}(e),"?").concat($(d).slice(1))}var iu="webStorageSupport",au=function(){function e(){s(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$i,this._completeRedirectFn=To}return l(e,[{key:"_openPopup",value:function(){var e=oe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=ru(t,n,r,Lt(),i),e.abrupt("return",Zo(t,o,ta()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=oe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=ru(t,n,r,Lt(),i),ra().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Dt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Go(t);case 2:return n=e.sent,r=new No(t),n.register("authEvent",(function(e){return Nt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(iu,{type:iu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Et(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Fo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return jn()||Rn()||Fn()}}]),e}(),ou=au,uu=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone")).credential=e,r}return l(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Wt(e,"POST","/v2/accounts/mfaEnrollment:finalize",zt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Wt(e,"POST","/v2/accounts/mfaSignIn:finalize",zt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){s(this,e),this.factorId=t}return l(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rt("unexpected MultiFactorSessionType")}}}]),e}()),su=function(){function e(){s(this,e)}return l(e,null,[{key:"assertion",value:function(e){return uu._fromCredential(e)}}]),e}();su.FACTOR_ID="phone";var cu,lu="@firebase/auth",fu="0.19.4",hu=function(){function e(t){s(this,e),this.auth=t,this.internalListeners=new Map}return l(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function du(){return window}cu="Browser",Pe(new ce("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Nt(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Nt(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:cu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qn(cu)},r=new Bn(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ot);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Pe(new ce("auth-internal",(function(e){return function(e){return new hu(e)}(zn(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(lu,fu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(cu)),Qe(lu,fu,"esm2017");function pu(e,t,n){return vu.apply(this,arguments)}function vu(){return vu=oe(se().mark((function e(t,n,r){var i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=du(),o=a.BuildInfo,Dt(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,bu(n.sessionId);case 4:return u=e.sent,s={},Fn()?s.ibi=o.packageName:On()?s.apn=o.packageName:Et(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",ru(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function yu(){return(yu=oe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=du(),r=n.BuildInfo,i={},Fn()?i.iosBundleId=r.packageName:On()?i.androidPackageName=r.packageName:Et(t,"operation-not-supported-in-this-environment"),e.next=5,Po(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e){var t=du().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function gu(e,t,n){return ku.apply(this,arguments)}function ku(){return ku=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=du(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Tt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),On()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ku.apply(this,arguments)}function wu(e){var t,n,r,i,a,o,u,s,c,l,f=du();Nt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Nt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Nt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function bu(e){return _u.apply(this,arguments)}function _u(){return(_u=oe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xu(e){if(Dt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Iu=function(e){h(n,e);var t=g(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return l(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),at(d(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(No);function Eu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Nu(),postBody:null,tenantId:e.tenantId,error:Tt(e,"no-auth-event")}}function Tu(e,t){return Ru()._set(Du(e),t)}function Su(e){return Cu.apply(this,arguments)}function Cu(){return(Cu=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru()._get(Du(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ru()._remove(Du(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e,t){var n,r,i=function(e){var t=Pu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Pu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Pu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Pu(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Tt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Nu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ru(){return Ot(Ji)}function Du(e){return Sn("authEvent",e.config.apiKey,e.name)}function Pu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=T(t=n)||a(t)||o(t)||S();r[0];return Z(r.slice(1).join("?"))}var Ou=function(){function e(){s(this,e),this._redirectPersistence=$i,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=To}return l(e,[{key:"_initialize",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Iu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Et(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=oe(se().mark((function e(t,n,r,i){var a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),co.clear(),e.next=10,this._originValidation(t);case 10:return o=Eu(t,r,i),e.next=13,Tu(t,o);case 13:return e.next=15,pu(t,o,n);case 15:return u=e.sent,e.next=18,mu(u);case 18:return s=e.sent,e.abrupt("return",gu(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=du(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Su(e);case 2:t.onEvent(Mu());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=oe(se().mark((function n(r){var i,a;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Su(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Au(i,r.url)),t.onEvent(a||Mu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");du().handleOpenURL=function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Lu=Ou;function Mu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tt("no-auth-event")}}function Fu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return!("file:"!==Fu()&&"ionic:"!==Fu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vu(){return z()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/Edge\/\d+/.test(e)}function qu(){try{var e=self.localStorage,t=ta();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return Vu()||ju(e)}()||W()}catch(n){return Bu()&&W()}return!1}function Bu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function zu(){return("http:"===Fu()||"https:"===Fu()||q()||Uu())&&!(B()||j())&&qu()&&!Bu()}function Wu(){return Uu()&&"undefined"!==typeof document}function Ku(){return Hu.apply(this,arguments)}function Hu(){return(Hu=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wu()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gu={LOCAL:"local",NONE:"none",SESSION:"session"},Qu=Nt,Yu="persistence";function Ju(e,t){Qu(Object.values(Gu).includes(t),e,"invalid-persistence-type"),B()?Qu(t!==Gu.SESSION,e,"unsupported-persistence-type"):j()?Qu(t===Gu.NONE,e,"unsupported-persistence-type"):Bu()?Qu(t===Gu.NONE||t===Gu.LOCAL&&W(),e,"unsupported-persistence-type"):Qu(t===Gu.NONE||qu(),e,"unsupported-persistence-type")}function Xu(e){return $u.apply(this,arguments)}function $u(){return($u=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Zu(),r=Sn(Yu,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(){return"undefined"!==typeof window?window:null}var es=Nt,ts=function(){function e(){s(this,e),this.browserResolver=Ot(ou),this.cordovaResolver=Ot(Lu),this.underlyingResolver=null,this._redirectPersistence=$i,this._completeRedirectFn=To}return l(e,[{key:"_initialize",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=oe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=oe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Wu()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return es(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ku();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ns(e){return e.unwrap()}function rs(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new ss(e,function(e,t){var n,r=ie(e),i=t;return Nt(t.customData.operationType,r,"argument-error"),Nt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),zi._fromError(r,i)}(e,t));else if(r){var i=is(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function is(e){var t=(e instanceof K?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof K)&&"temporaryProof"in t&&"phoneNumber"in t)return Qa.credentialFromResult(e);var n,r=t.providerId;if(!r||r===ft)return null;switch(r){case lt:n=Or;break;case st:n=Pr;break;case ct:n=Lr;break;case ht:n=Ur;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Mr._create(r,u):wr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Dr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof K?n.credentialFromError(e):n.credentialFromResult(e)}function as(e,t){return t.catch((function(t){throw t instanceof K&&rs(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,is(t)),additionalUserInfo:qi(e),user:cs.getOrCreate(r)}}))}function os(e,t){return us.apply(this,arguments)}function us(){return(us=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return as(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ss=function(){function e(t,n){s(this,e),this.resolver=n,this.auth=t.wrapped()}return l(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return as(ns(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),cs=function(){function e(t){s(this,e),this._delegate=t,this.multiFactor=function(e){var t=ie(e);return Hi.has(t)||Hi.set(t,Ki._fromUser(t)),Hi.get(t)}(t)}return l(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(this.auth,ai(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",os(this.auth,Ba(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(this.auth,oo(this._delegate,t,ts)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xu(zn(this.auth));case 2:return e.abrupt("return",_o(this._delegate,t,ts));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(this.auth,ui(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return os(this.auth,function(e,t,n){return Wa.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return as(this.auth,function(e,t,n){return ao.apply(this,arguments)}(this._delegate,e,ts))}},{key:"reauthenticateWithRedirect",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xu(zn(this.auth));case 2:return e.abrupt("return",wo(this._delegate,t,ts));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ci.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Pi(ie(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Pi(ie(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ga.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Di.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ai.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();cs.USER_MAP=new WeakMap;var ls=Nt,fs=function(){function e(t,n){if(s(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ls(r,"invalid-api-key",{appName:t.name});var i=[Tn];if("undefined"!==typeof window){i=function(e,t){var n=Zu();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Sn(Yu,e,t);switch(n.sessionStorage.getItem(r)){case Gu.NONE:return[Tn];case Gu.LOCAL:return[ba,$i];case Gu.SESSION:return[$i];default:return[]}}(r,t.name);for(var a=0,o=[ba,Ji,$i];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}ls(r,"invalid-api-key",{appName:t.name});var c="undefined"!==typeof window?ts:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:c}}),this._delegate._updateErrorMap(wt),this.linkUnderlyingAuth()}return l(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Kn(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return mi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return gi(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return yi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(this._delegate,bi(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Si.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Cr.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ls(zu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Io(this._delegate,ts);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",as(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){zn(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=hs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=hs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return xi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return vi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ju(this._delegate,t),e.t0=t,e.next=e.t0===Gu.SESSION?4:e.t0===Gu.LOCAL?6:e.t0===Gu.NONE?11:13;break;case 4:return n=$i,e.abrupt("break",14);case 6:return e.next=8,Ot(ba)._isAvailable();case 8:return r=e.sent,n=r?ba:Ji,e.abrupt("break",14);case 11:return n=Tn,e.abrupt("break",14);case 13:return e.abrupt("return",Et("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return as(this._delegate,function(e){return zr.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return as(this._delegate,ri(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return as(this._delegate,function(e,t){return fi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return as(this._delegate,function(e,t,n){return ri(ie(e),Ar.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return as(this._delegate,function(e,t,n){return Ii.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return os(this._delegate,function(e,t,n){return qa.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ls(zu(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",as(this._delegate,ro(this._delegate,t,ts)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ls(zu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xu(this._delegate);case 3:return e.abrupt("return",go(this._delegate,t,ts));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return wi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function hs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&cs.getOrCreate(e))},error:t,complete:n}}fs.Persistence=Gu;var ds=function(){function e(){s(this,e),this.providerId="phone",this._delegate=new Qa(ns(rt.auth()))}return l(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Qa.credential(e,t)}}]),e}();ds.PHONE_SIGN_IN_METHOD=Qa.PHONE_SIGN_IN_METHOD,ds.PROVIDER_ID=Qa.PROVIDER_ID;var ps,vs=Nt,ys=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rt.app();s(this,e),vs(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ua(t,n,i.auth()),this.type=this._delegate.type}return l(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(ps=rt).INTERNAL.registerComponent(new ce("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fs(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:dt,PASSWORD_RESET:pt,RECOVER_EMAIL:vt,REVERT_SECOND_FACTOR_ADDITION:yt,VERIFY_AND_CHANGE_EMAIL:mt,VERIFY_EMAIL:gt}},EmailAuthProvider:Ar,FacebookAuthProvider:Pr,GithubAuthProvider:Lr,GoogleAuthProvider:Or,OAuthProvider:Dr,SAMLAuthProvider:Fr,PhoneAuthProvider:ds,PhoneMultiFactorGenerator:su,RecaptchaVerifier:ys,TwitterAuthProvider:Ur,Auth:fs,AuthCredential:Qn,Error:K}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ps.registerVersion("@firebase/auth-compat","0.2.4");var ms,gs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ks={},ws=ws||{},bs=gs||self;function _s(){}function xs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Is(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Es="closure_uid_"+(1e9*Math.random()>>>0),Ts=0;function Ss(e,t,n){return e.call.apply(e.bind,arguments)}function Cs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function As(e,t,n){return(As=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ss:Cs).apply(null,arguments)}function Ns(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rs(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ds(){this.s=this.s,this.o=this.o}var Ps={};Ds.prototype.s=!1,Ds.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Es)&&e[Es]||(e[Es]=++Ts)}(this);delete Ps[e]}},Ds.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Os=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ls=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Ms(e){return Array.prototype.concat.apply([],arguments)}function Fs(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Us(e){return/^[\s\xa0]*$/.test(e)}var Vs,js=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qs(e,t){return-1!=e.indexOf(t)}function Bs(e,t){return e<t?-1:e>t?1:0}e:{var zs=bs.navigator;if(zs){var Ws=zs.userAgent;if(Ws){Vs=Ws;break e}}Vs=""}function Ks(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Hs(e){var t={};for(var n in e)t[n]=e[n];return t}var Gs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qs(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Gs.length;a++)n=Gs[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ys(e){return Ys[" "](e),e}Ys[" "]=_s;var Js,Xs=qs(Vs,"Opera"),$s=qs(Vs,"Trident")||qs(Vs,"MSIE"),Zs=qs(Vs,"Edge"),ec=Zs||$s,tc=qs(Vs,"Gecko")&&!(qs(Vs.toLowerCase(),"webkit")&&!qs(Vs,"Edge"))&&!(qs(Vs,"Trident")||qs(Vs,"MSIE"))&&!qs(Vs,"Edge"),nc=qs(Vs.toLowerCase(),"webkit")&&!qs(Vs,"Edge");function rc(){var e=bs.document;return e?e.documentMode:void 0}e:{var ic="",ac=function(){var e=Vs;return tc?/rv:([^\);]+)(\)|;)/.exec(e):Zs?/Edge\/([\d\.]+)/.exec(e):$s?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nc?/WebKit\/(\S+)/.exec(e):Xs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ac&&(ic=ac?ac[1]:""),$s){var oc=rc();if(null!=oc&&oc>parseFloat(ic)){Js=String(oc);break e}}Js=ic}var uc,sc={};function cc(){return function(e){var t=sc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=js(String(Js)).split("."),n=js("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Bs(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Bs(0==a[2].length,0==o[2].length)||Bs(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(bs.document&&$s){var lc=rc();uc=lc||(parseInt(Js,10)||void 0)}else uc=void 0;var fc=uc,hc=function(){if(!bs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{bs.addEventListener("test",_s,t),bs.removeEventListener("test",_s,t)}catch(n){}return e}();function dc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function pc(e,t){if(dc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tc){e:{try{Ys(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pc.Z.h.call(this)}}dc.prototype.h=function(){this.defaultPrevented=!0},Rs(pc,dc);var vc={2:"touch",3:"pen",4:"mouse"};pc.prototype.h=function(){pc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yc="closure_listenable_"+(1e6*Math.random()|0),mc=0;function gc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++mc,this.ca=this.fa=!1}function kc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function wc(e){this.src=e,this.g={},this.h=0}function bc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Os(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(kc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function _c(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}wc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=_c(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new gc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var xc="closure_lm_"+(1e6*Math.random()|0),Ic={};function Ec(e,t,n,r,i){if(r&&r.once)return Sc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ec(e,t[a],n,r,i);return null}return n=Oc(n),e&&e[yc]?e.N(t,n,Is(r)?!!r.capture:!!r,i):Tc(e,t,n,!1,r,i)}function Tc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Is(i)?!!i.capture:!!i,u=Dc(e);if(u||(e[xc]=u=new wc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Rc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Nc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Sc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Sc(e,t[a],n,r,i);return null}return n=Oc(n),e&&e[yc]?e.O(t,n,Is(r)?!!r.capture:!!r,i):Tc(e,t,n,!0,r,i)}function Cc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Cc(e,t[a],n,r,i);else r=Is(r)?!!r.capture:!!r,n=Oc(n),e&&e[yc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=_c(a=e.g[t],n,r,i))&&(kc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Dc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_c(t,n,r,i)),(n=-1<e?t[e]:null)&&Ac(n))}function Ac(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[yc])bc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Nc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Dc(t))?(bc(n,e),0==n.h&&(n.src=null,t[xc]=null)):kc(e)}}}function Nc(e){return e in Ic?Ic[e]:Ic[e]="on"+e}function Rc(e,t){if(e.ca)e=!0;else{t=new pc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ac(e),e=n.call(r,t)}return e}function Dc(e){return(e=e[xc])instanceof wc?e:null}var Pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oc(e){return"function"===typeof e?e:(e[Pc]||(e[Pc]=function(t){return e.handleEvent(t)}),e[Pc])}function Lc(){Ds.call(this),this.i=new wc(this),this.P=this,this.I=null}function Mc(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new dc(t,e);else if(t instanceof dc)t.target=t.target||e;else{var i=t;Qs(t=new dc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Fc(o,r,!0,t)&&i}if(i=Fc(o=t.g=e,r,!0,t)&&i,i=Fc(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Fc(o=t.g=n[a],r,!1,t)&&i}function Fc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&bc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Rs(Lc,Ds),Lc.prototype[yc]=!0,Lc.prototype.removeEventListener=function(e,t,n,r){Cc(this,e,t,n,r)},Lc.prototype.M=function(){if(Lc.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)kc(n[r]);delete t.g[e],t.h--}}this.I=null},Lc.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Lc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Uc=bs.JSON.stringify;function Vc(){var e=Gc,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jc,qc=function(){function e(){s(this,e),this.h=this.g=null}return l(e,[{key:"add",value:function(e,t){var n=Bc.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Bc=new(function(){function e(t,n){s(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return l(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new zc}),(function(e){return e.reset()})),zc=function(){function e(){s(this,e),this.next=this.g=this.h=null}return l(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Wc(e){bs.setTimeout((function(){throw e}),0)}function Kc(e,t){jc||function(){var e=bs.Promise.resolve(void 0);jc=function(){e.then(Qc)}}(),Hc||(jc(),Hc=!0),Gc.add(e,t)}var Hc=!1,Gc=new qc;function Qc(){for(var e;e=Vc();){try{e.h.call(e.g)}catch(n){Wc(n)}var t=Bc;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hc=!1}function Yc(e,t){Lc.call(this),this.h=e||1,this.g=t||bs,this.j=As(this.kb,this),this.l=Date.now()}function Jc(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Xc(e,t,n){if("function"===typeof e)n&&(e=As(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=As(e.handleEvent,e)}return 2147483647<Number(t)?-1:bs.setTimeout(e,t||0)}function $c(e){e.g=Xc((function(){e.g=null,e.i&&(e.i=!1,$c(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Rs(Yc,Lc),(ms=Yc.prototype).da=!1,ms.S=null,ms.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mc(this,"tick"),this.da&&(Jc(this),this.start()))}},ms.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ms.M=function(){Yc.Z.M.call(this),Jc(this),delete this.g};var Zc=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return l(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:$c(this)}},{key:"M",value:function(){at(d(n.prototype),"M",this).call(this),this.g&&(bs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ds);function el(e){Ds.call(this),this.h=e,this.g={}}Rs(el,Ds);var tl=[];function nl(e,t,n,r){Array.isArray(n)||(n&&(tl[0]=n.toString()),n=tl);for(var i=0;i<n.length;i++){var a=Ec(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function rl(e){Ks(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ac(e)}),e),e.g={}}function il(){this.g=!0}function al(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Uc(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}el.prototype.M=function(){el.Z.M.call(this),rl(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},il.prototype.Aa=function(){this.g=!1},il.prototype.info=function(){};var ol={},ul=null;function sl(){return ul=ul||new Lc}function cl(e){dc.call(this,ol.Ma,e)}function ll(e){var t=sl();Mc(t,new cl(t,e))}function fl(e,t){dc.call(this,ol.STAT_EVENT,e),this.stat=t}function hl(e){var t=sl();Mc(t,new fl(t,e))}function dl(e,t){dc.call(this,ol.Na,e),this.size=t}function pl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return bs.setTimeout((function(){e()}),t)}ol.Ma="serverreachability",Rs(cl,dc),ol.STAT_EVENT="statevent",Rs(fl,dc),ol.Na="timingevent",Rs(dl,dc);var vl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ml(){}function gl(e){return e.h||(e.h=e.i())}function kl(){}ml.prototype.h=null;var wl,bl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _l(){dc.call(this,"d")}function xl(){dc.call(this,"c")}function Il(){}function El(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new el(this),this.P=Sl,e=ec?125:void 0,this.W=new Yc(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tl}function Tl(){this.i=null,this.g="",this.h=!1}Rs(_l,dc),Rs(xl,dc),Rs(Il,ml),Il.prototype.g=function(){return new XMLHttpRequest},Il.prototype.i=function(){return{}},wl=new Il;var Sl=45e3,Cl={},Al={};function Nl(e,t,n){e.K=1,e.v=Zl(Gl(t)),e.s=n,e.U=!0,Rl(e,null)}function Rl(e,t){e.F=Date.now(),Ll(e),e.A=Gl(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),df(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Tl,e.g=vh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Zc(As(e.Ia,e,e.g),e.O)),nl(e.V,e.g,"readystatechange",e.gb),t=e.H?Hs(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ll(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Dl(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Pl(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ol(e,n))==Al){4==t&&(e.o=4,hl(14),i=!1),al(e.j,e.m,null,"[Incomplete Response]");break}if(r==Cl){e.o=4,hl(15),al(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}al(e.j,e.m,r,null),jl(e,r)}Dl(e)&&r!=Al&&r!=Cl&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),uh(t),t.L=!0,hl(11))):(al(e.j,e.m,n,"[Invalid Chunked Response]"),Vl(e),Ul(e))}function Ol(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Al:(n=Number(t.substring(n,r)),isNaN(n)?Cl:(r+=1)+n>t.length?Al:(t=t.substr(r,n),e.C=r+n,t))}function Ll(e){e.Y=Date.now()+e.P,Ml(e,e.P)}function Ml(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=pl(As(e.eb,e),t)}function Fl(e){e.B&&(bs.clearTimeout(e.B),e.B=null)}function Ul(e){0==e.l.G||e.I||lh(e.l,e)}function Vl(e){Fl(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Jc(e.W),rl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function jl(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||bf(n.i,e)))if(n.I=e.N,!e.J&&bf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ch(n),$f(n)}oh(n),hl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=pl(As(n.ab,n),6e3));if(1>=wf(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else hh(n,11)}else if((e.J||n.g==e)&&ch(n),!Us(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(qs(l,"spdy")||qs(l,"quic")||qs(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(_f(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,$l(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ph(r,r.H?r.la:null,r.W),d.J){xf(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Fl(p),Ll(p)),r.g=d}else ah(r);0<n.l.length&&th(n)}else"stop"!=a[0]&&"close"!=a[0]||hh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?hh(n,7):Xf(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}ll(4)}catch(a){}}function ql(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xs(e)||"string"===typeof e)Ls(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(xs(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(xs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Bl(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Bl)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function zl(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Wl(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Wl(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Wl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ms=El.prototype).setTimeout=function(e){this.P=e},ms.gb=function(e){e=e.target;var t=this.L;t&&3==Hf(e)?t.l():this.Ia(e)},ms.Ia=function(e){try{if(e==this.g)e:{var t=Hf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ec||this.g&&(this.h.h||this.g.ga()||Gf(this.g)))){this.I||4!=t||7==n||ll(8==n||0>=r?3:2),Fl(this);var i=this.g.ba();this.N=i;t:if(Dl(this)){var a=Gf(this.g);e="";var o=a.length,u=4==Hf(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Vl(this),Ul(this);var s="";break t}this.h.i=new bs.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Us(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,hl(12),Vl(this),Ul(this);break e}al(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jl(this,i)}this.U?(Pl(this,t,s),ec&&this.i&&3==t&&(nl(this.V,this.W,"tick",this.fb),this.W.start())):(al(this.j,this.m,s,null),jl(this,s)),4==t&&Vl(this),this.i&&!this.I&&(4==t?lh(this.l,this):(this.i=!1,Ll(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,hl(12)):(this.o=0,hl(13)),Vl(this),Ul(this)}}}catch(t){}},ms.fb=function(){if(this.g){var e=Hf(this.g),t=this.g.ga();this.C<t.length&&(Fl(this),Pl(this,e,t),this.i&&4!=e&&Ll(this))}},ms.cancel=function(){this.I=!0,Vl(this)},ms.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ll(3),hl(17)),Vl(this),this.o=2,Ul(this)):Ml(this,this.Y-e)},(ms=Bl.prototype).R=function(){zl(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ms.T=function(){return zl(this),this.g.concat()},ms.get=function(e,t){return Wl(this.h,e)?this.h[e]:t},ms.set=function(e,t){Wl(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ms.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Kl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hl(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Hl){this.g=void 0!==t?t:e.g,Ql(this,e.j),this.s=e.s,Yl(this,e.i),Jl(this,e.m),this.l=e.l,t=e.h;var n=new cf;n.i=t.i,t.g&&(n.g=new Bl(t.g),n.h=t.h),Xl(this,n),this.o=e.o}else e&&(n=String(e).match(Kl))?(this.g=!!t,Ql(this,n[1]||"",!0),this.s=ef(n[2]||""),Yl(this,n[3]||"",!0),Jl(this,n[4]),this.l=ef(n[5]||"",!0),Xl(this,n[6]||"",!0),this.o=ef(n[7]||"")):(this.g=!!t,this.h=new cf(null,this.g))}function Gl(e){return new Hl(e)}function Ql(e,t,n){e.j=n?ef(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yl(e,t,n){e.i=n?ef(t,!0):t}function Jl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xl(e,t,n){t instanceof cf?(e.h=t,function(e,t){t&&!e.j&&(lf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ff(this,t),df(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=tf(t,uf)),e.h=new cf(t,e.g))}function $l(e,t,n){e.h.set(t,n)}function Zl(e){return $l(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ef(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,nf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Hl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tf(t,rf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tf(t,rf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(tf(n,"/"==n.charAt(0)?of:af,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",tf(n,sf)),e.join("")};var rf=/[#\/\?@]/g,af=/[#\?:]/g,of=/[#\?]/g,uf=/[#\?@]/g,sf=/#/g;function cf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function lf(e){e.g||(e.g=new Bl,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ff(e,t){lf(e),t=pf(e,t),Wl(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wl((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&zl(e)))}function hf(e,t){return lf(e),t=pf(e,t),Wl(e.g.h,t)}function df(e,t,n){ff(e,t),0<n.length&&(e.i=null,e.g.set(pf(e,t),Fs(n)),e.h+=n.length)}function pf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ms=cf.prototype).add=function(e,t){lf(this),this.i=null,e=pf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ms.forEach=function(e,t){lf(this),this.g.forEach((function(n,r){Ls(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ms.T=function(){lf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ms.R=function(e){lf(this);var t=[];if("string"===typeof e)hf(this,e)&&(t=Ms(t,this.g.get(pf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Ms(t,e[n])}return t},ms.set=function(e,t){return lf(this),this.i=null,hf(this,e=pf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ms.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ms.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var vf=function e(t,n){s(this,e),this.h=t,this.g=n};function yf(e){this.l=e||gf,bs.PerformanceNavigationTiming?e=0<(e=bs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(bs.g&&bs.g.Ea&&bs.g.Ea()&&bs.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mf,gf=10;function kf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wf(e){return e.h?1:e.g?e.g.size:0}function bf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _f(e,t){e.g?e.g.add(t):e.h=t}function xf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function If(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=E(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Fs(e.i)}function Ef(){}function Tf(){this.g=new Ef}function Sf(e,t,n){var r=n||"";try{ql(e,(function(e,n){var i=e;Is(e)&&(i=Uc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Af(e){this.l=e.$b||null,this.j=e.ib||!1}function Nf(e,t){Lc.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Rf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yf.prototype.cancel=function(){if(this.i=If(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=E(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ef.prototype.stringify=function(e){return bs.JSON.stringify(e,void 0)},Ef.prototype.parse=function(e){return bs.JSON.parse(e,void 0)},Rs(Af,ml),Af.prototype.g=function(){return new Nf(this.l,this.j)},Af.prototype.i=(mf={},function(){return mf}),Rs(Nf,Lc);var Rf=0;function Df(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Pf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Of(e)}function Of(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ms=Nf.prototype).open=function(e,t){if(this.readyState!=Rf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Of(this)},ms.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||bs).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ms.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pf(this)),this.readyState=Rf},ms.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Of(this)),this.g&&(this.readyState=3,Of(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof bs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Df(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ms.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pf(this):Of(this),3==this.readyState&&Df(this)}},ms.Ua=function(e){this.g&&(this.response=this.responseText=e,Pf(this))},ms.Ta=function(e){this.g&&(this.response=e,Pf(this))},ms.ha=function(){this.g&&Pf(this)},ms.setRequestHeader=function(e,t){this.v.append(e,t)},ms.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ms.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Lf=bs.JSON.parse;function Mf(e){Lc.call(this),this.headers=new Bl,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ff,this.K=this.L=!1}Rs(Mf,Lc);var Ff="",Uf=/^https?$/i,Vf=["POST","PUT"];function jf(e){return"content-type"==e.toLowerCase()}function qf(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Bf(e),Wf(e)}function Bf(e){e.D||(e.D=!0,Mc(e,"complete"),Mc(e,"error"))}function zf(e){if(e.h&&"undefined"!=typeof ws&&(!e.C[1]||4!=Hf(e)||2!=e.ba()))if(e.v&&4==Hf(e))Xc(e.Fa,0,e);else if(Mc(e,"readystatechange"),4==Hf(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Kl)[1]||null;if(!a&&bs.self&&bs.self.location){var o=bs.self.location.protocol;a=o.substr(0,o.length-1)}i=!Uf.test(a?a.toLowerCase():"")}t=i}if(t)Mc(e,"complete"),Mc(e,"success");else{e.m=6;try{var u=2<Hf(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Bf(e)}}finally{Wf(e)}}}function Wf(e,t){if(e.g){Kf(e);var n=e.g,r=e.C[0]?_s:null;e.g=null,e.C=null,t||Mc(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Kf(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(bs.clearTimeout(e.A),e.A=null)}function Hf(e){return e.g?e.g.readyState:0}function Gf(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ff:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Qf(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ks(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$l(e,t,n))}function Yf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jf(e){this.za=0,this.l=[],this.h=new il,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yf("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yf("baseRetryDelayMs",5e3,e),this.$a=Yf("retryDelaySeedMs",1e4,e),this.Ya=Yf("forwardChannelMaxRetries",2,e),this.ra=Yf("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new yf(e&&e.concurrentRequestLimit),this.Ca=new Tf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Xf(e){if(Zf(e),3==e.G){var t=e.V++,n=Gl(e.F);$l(n,"SID",e.J),$l(n,"RID",t),$l(n,"TYPE","terminate"),rh(e,n),(t=new El(e,e.h,t,void 0)).K=2,t.v=Zl(Gl(n)),n=!1,bs.navigator&&bs.navigator.sendBeacon&&(n=bs.navigator.sendBeacon(t.v.toString(),"")),!n&&bs.Image&&((new Image).src=t.v,n=!0),n||(t.g=vh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ll(t)}dh(e)}function $f(e){e.g&&(uh(e),e.g.cancel(),e.g=null)}function Zf(e){$f(e),e.u&&(bs.clearTimeout(e.u),e.u=null),ch(e),e.i.cancel(),e.m&&("number"===typeof e.m&&bs.clearTimeout(e.m),e.m=null)}function eh(e,t){e.l.push(new vf(e.Za++,t)),3==e.G&&th(e)}function th(e){kf(e.i)||e.m||(e.m=!0,Kc(e.Ha,e),e.C=0)}function nh(e,t){var n;n=t?t.m:e.V++;var r=Gl(e.F);$l(r,"SID",e.J),$l(r,"RID",n),$l(r,"AID",e.U),rh(e,r),e.o&&e.s&&Qf(r,e.o,e.s),n=new El(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ih(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),_f(e.i,n),Nl(n,r,t)}function rh(e,t){e.j&&ql({},(function(e,n){$l(t,n,e)}))}function ih(e,t,n){n=Math.min(e.l.length,n);var r=e.j?As(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Sf(l,o,"req"+c+"_")}catch(Gh){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ah(e){e.g||e.u||(e.Y=1,Kc(e.Ga,e),e.A=0)}function oh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=pl(As(e.Ga,e),fh(e,e.A)),e.A++,!0)}function uh(e){null!=e.B&&(bs.clearTimeout(e.B),e.B=null)}function sh(e){e.g=new El(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Gl(e.oa);$l(t,"RID","rpc"),$l(t,"SID",e.J),$l(t,"CI",e.N?"0":"1"),$l(t,"AID",e.U),rh(e,t),$l(t,"TYPE","xmlhttp"),e.o&&e.s&&Qf(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Zl(Gl(t)),n.s=null,n.U=!0,Rl(n,e)}function ch(e){null!=e.v&&(bs.clearTimeout(e.v),e.v=null)}function lh(e,t){var n=null;if(e.g==t){ch(e),uh(e),e.g=null;var r=2}else{if(!bf(e.i,t))return;n=t.D,xf(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Mc(r=sl(),new dl(r,n,t,i)),th(e)}else ah(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(wf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=pl(As(e.Ha,e,t),fh(e,e.C)),e.C++,!0))}(e,t)||2==r&&oh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hh(e,5);break;case 4:hh(e,10);break;case 3:hh(e,6);break;default:hh(e,2)}}function fh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function hh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=As(e.jb,e);n||(n=new Hl("//www.google.com/images/cleardot.gif"),bs.location&&"http"==bs.location.protocol||Ql(n,"https"),Zl(n)),function(e,t){var n=new il;if(bs.Image){var r=new Image;r.onload=Ns(Cf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ns(Cf,n,r,"TestLoadImage: error",!1,t),r.onabort=Ns(Cf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ns(Cf,n,r,"TestLoadImage: timeout",!1,t),bs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hl(2);e.G=0,e.j&&e.j.va(t),dh(e),Zf(e)}function dh(e){e.G=0,e.I=-1,e.j&&(0==If(e.i).length&&0==e.l.length||(e.i.i.length=0,Fs(e.l),e.l.length=0),e.j.ua())}function ph(e,t,n){var r=function(e){return e instanceof Hl?Gl(e):new Hl(e,void 0)}(n);if(""!=r.i)t&&Yl(r,t+"."+r.i),Jl(r,r.m);else{var i=bs.location;r=function(e,t,n,r){var i=new Hl(null,void 0);return e&&Ql(i,e),t&&Yl(i,t),n&&Jl(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ks(e.aa,(function(e,t){$l(r,t,e)})),t=e.D,n=e.sa,t&&n&&$l(r,t,n),$l(r,"VER",e.ma),rh(e,r),r}function vh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Mf(new Af({ib:!0})):new Mf(e.qa)).L=e.H,t}function yh(){}function mh(){if($s&&!(10<=Number(fc)))throw Error("Environmental error: no available transport.")}function gh(e,t){Lc.call(this),this.g=new Jf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Us(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Us(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bh(this)}function kh(e){_l.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wh(){xl.call(this),this.status=1}function bh(e){this.g=e}(ms=Mf.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wl.g(),this.C=this.u?gl(this.u):gl(wl),this.g.onreadystatechange=As(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void qf(this,a)}e=n||"";var i=new Bl(this.headers);r&&ql(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=jf,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=bs.FormData&&e instanceof bs.FormData,!(0<=Os(Vf,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kf(this),0<this.B&&((this.K=function(e){return $s&&cc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=As(this.pa,this)):this.A=Xc(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){qf(this,a)}},ms.pa=function(){"undefined"!=typeof ws&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mc(this,"timeout"),this.abort(8))},ms.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Mc(this,"complete"),Mc(this,"abort"),Wf(this))},ms.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wf(this,!0)),Mf.Z.M.call(this)},ms.Fa=function(){this.s||(this.F||this.v||this.l?zf(this):this.cb())},ms.cb=function(){zf(this)},ms.ba=function(){try{return 2<Hf(this)?this.g.status:-1}catch(mf){return-1}},ms.ga=function(){try{return this.g?this.g.responseText:""}catch(mf){return""}},ms.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Lf(t)}},ms.Da=function(){return this.m},ms.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(ms=Jf.prototype).ma=8,ms.G=1,ms.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ms.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new El(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Qs(n=Hs(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ih(this,t,r),$l(i=Gl(this.F),"RID",e),$l(i,"CVER",22),this.D&&$l(i,"X-HTTP-Session-Id",this.D),rh(this,i),this.o&&n&&Qf(i,this.o,n),_f(this.i,t),this.Ra&&$l(i,"TYPE","init"),this.ja?($l(i,"$req",r),$l(i,"SID","null"),t.$=!0,Nl(t,i,null)):Nl(t,i,r),this.G=2}}else 3==this.G&&(e?nh(this,e):0==this.l.length||kf(this.i)||nh(this))},ms.Ga=function(){if(this.u=null,sh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=pl(As(this.bb,this),e)}},ms.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hl(10),$f(this),sh(this))},ms.ab=function(){null!=this.v&&(this.v=null,$f(this),oh(this),hl(19))},ms.jb=function(e){e?(this.h.info("Successfully pinged google.com"),hl(2)):(this.h.info("Failed to ping google.com"),hl(1))},(ms=yh.prototype).xa=function(){},ms.wa=function(){},ms.va=function(){},ms.ua=function(){},ms.Oa=function(){},mh.prototype.g=function(e,t){return new gh(e,t)},Rs(gh,Lc),gh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Kc(As(e.hb,e,t))),hl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ph(e,null,e.W),th(e)},gh.prototype.close=function(){Xf(this.g)},gh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,eh(this.g,t)}else this.v?((t={}).__data__=Uc(e),eh(this.g,t)):eh(this.g,e)},gh.prototype.M=function(){this.g.j=null,delete this.j,Xf(this.g),delete this.g,gh.Z.M.call(this)},Rs(kh,_l),Rs(wh,xl),Rs(bh,yh),bh.prototype.xa=function(){Mc(this.g,"a")},bh.prototype.wa=function(e){Mc(this.g,new kh(e))},bh.prototype.va=function(e){Mc(this.g,new wh(e))},bh.prototype.ua=function(){Mc(this.g,"b")},mh.prototype.createWebChannel=mh.prototype.g,gh.prototype.send=gh.prototype.u,gh.prototype.open=gh.prototype.m,gh.prototype.close=gh.prototype.close,vl.NO_ERROR=0,vl.TIMEOUT=8,vl.HTTP_ERROR=6,yl.COMPLETE="complete",kl.EventType=bl,bl.OPEN="a",bl.CLOSE="b",bl.ERROR="c",bl.MESSAGE="d",Lc.prototype.listen=Lc.prototype.N,Mf.prototype.listenOnce=Mf.prototype.O,Mf.prototype.getLastError=Mf.prototype.La,Mf.prototype.getLastErrorCode=Mf.prototype.Da,Mf.prototype.getStatus=Mf.prototype.ba,Mf.prototype.getResponseJson=Mf.prototype.Qa,Mf.prototype.getResponseText=Mf.prototype.ga,Mf.prototype.send=Mf.prototype.ea;var _h=ks.createWebChannelTransport=function(){return new mh},xh=ks.getStatEventTarget=function(){return sl()},Ih=ks.ErrorCode=vl,Eh=ks.EventType=yl,Th=ks.Event=ol,Sh=ks.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ch=ks.FetchXmlHttpFactory=Af,Ah=ks.WebChannel=kl,Nh=ks.XhrIo=Mf,Rh="@firebase/firestore",Dh=function(){function e(t){s(this,e),this.uid=t}return l(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Dh.UNAUTHENTICATED=new Dh(null),Dh.GOOGLE_CREDENTIALS=new Dh("google-credentials-uid"),Dh.FIRST_PARTY=new Dh("first-party-uid"),Dh.MOCK_USER=new Dh("mock-user");var Ph="9.6.1",Oh=new _e("@firebase/firestore");function Lh(){return Oh.logLevel}function Mh(e){if(Oh.logLevel<=de.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vh);Oh.debug.apply(Oh,["Firestore (".concat(Ph,"): ").concat(e)].concat(u(i)))}}function Fh(e){if(Oh.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vh);Oh.error.apply(Oh,["Firestore (".concat(Ph,"): ").concat(e)].concat(u(i)))}}function Uh(e){if(Oh.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vh);Oh.warn.apply(Oh,["Firestore (".concat(Ph,"): ").concat(e)].concat(u(i)))}}function Vh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ph,") INTERNAL ASSERTION FAILED: ")+e;throw Fh(t),new Error(t)}function qh(e,t){e||jh()}function Bh(e,t){return e}var zh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wh=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(N(Error)),Kh=function e(){var t=this;s(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Hh=function e(t,n){s(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},Gh=function(){function e(){s(this,e)}return l(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Dh.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Qh=function(){function e(t){s(this,e),this.token=t,this.changeListener=null}return l(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Yh=function(){function e(t){s(this,e),this.t=t,this.currentUser=Dh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return l(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Kh;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Kh,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Mh("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Mh("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kh)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Mh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(qh("string"==typeof n.accessToken),new Hh(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return qh(null===e||"string"==typeof e),new Dh(e)}}]),e}(),Jh=function e(t,n,r){s(this,e),this.type="FirstParty",this.user=Dh.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)},Xh=function(){function e(t,n,r){s(this,e),this.h=t,this.l=n,this.m=r}return l(e,[{key:"getToken",value:function(){return Promise.resolve(new Jh(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Dh.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),$h=function e(t){s(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},Zh=function(){function e(t){s(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return l(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Mh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Mh("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Mh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(qh("string"==typeof e.token),new $h(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),ed=function(){function e(t,n){var r=this;s(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return l(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function td(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ed.I=-1;var nd=function(){function e(){s(this,e)}return l(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=td(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function rd(e,t){return e<t?-1:e>t?1:0}function id(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ad(e){return e+"\0"}var od=function(){function e(t,n){if(s(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Wh(zh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wh(zh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Wh(zh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wh(zh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return l(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?rd(this.nanoseconds,e.nanoseconds):rd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ud=function(){function e(t){s(this,e),this.timestamp=t}return l(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new od(0,0))}}]),e}();function sd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ld(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var fd=function(){function e(t,n,r){s(this,e),void 0===n?n=0:n>t.length&&jh(),void 0===r?r=t.length-n:r>t.length-n&&jh(),this.segments=t,this.offset=n,this.len=r}return l(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),hd=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Wh(zh.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fd),dd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pd=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return dd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Wh(zh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Wh(zh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Wh(zh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Wh(zh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fd),vd=function(){function e(t){s(this,e),this.fields=t,t.sort(pd.comparator)}return l(e,[{key:"covers",value:function(e){var t,n=E(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return id(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var yd=function(){function e(t){s(this,e),this.binaryString=t}return l(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return rd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();yd.EMPTY_BYTE_STRING=new yd("");var md=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gd(e){if(qh(!!e),"string"==typeof e){var t=0,n=md.exec(e);if(qh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:kd(e.seconds),nanos:kd(e.nanos)}}function kd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wd(e){return"string"==typeof e?yd.fromBase64String(e):yd.fromUint8Array(e)}function bd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _d(e){var t=e.mapValue.fields.__previous_value__;return bd(t)?_d(t):t}function xd(e){var t=gd(e.mapValue.fields.__local_write_time__.timestampValue);return new od(t.seconds,t.nanos)}function Id(e){return null==e}function Ed(e){return 0===e&&1/e==-1/0}function Td(e){return"number"==typeof e&&Number.isInteger(e)&&!Ed(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Sd=function(){function e(t){s(this,e),this.path=t}return l(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===hd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(hd.fromString(t))}},{key:"fromName",value:function(t){return new e(hd.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return hd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new hd(t.slice()))}}]),e}();function Cd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bd(e)?4:10:jh()}function Ad(e,t){var n=Cd(e);if(n!==Cd(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xd(e).isEqual(xd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=gd(e.timestampValue),r=gd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wd(e.bytesValue).isEqual(wd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return kd(e.geoPointValue.latitude)===kd(t.geoPointValue.latitude)&&kd(e.geoPointValue.longitude)===kd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return kd(e.integerValue)===kd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=kd(e.doubleValue),r=kd(t.doubleValue);return n===r?Ed(n)===Ed(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return id(e.arrayValue.values||[],t.arrayValue.values||[],Ad);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sd(n)!==sd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ad(n[i],r[i])))return!1;return!0}(e,t);default:return jh()}}function Nd(e,t){return void 0!==(e.values||[]).find((function(e){return Ad(e,t)}))}function Rd(e,t){var n=Cd(e),r=Cd(t);if(n!==r)return rd(n,r);switch(n){case 0:return 0;case 1:return rd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=kd(e.integerValue||e.doubleValue),r=kd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dd(e.timestampValue,t.timestampValue);case 4:return Dd(xd(e),xd(t));case 5:return rd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=wd(e),r=wd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=rd(n[i],r[i]);if(0!==a)return a}return rd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=rd(kd(e.latitude),kd(t.latitude));return 0!==n?n:rd(kd(e.longitude),kd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Rd(n[i],r[i]);if(a)return a}return rd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=rd(r[o],a[o]);if(0!==u)return u;var s=Rd(n[r[o]],i[a[o]]);if(0!==s)return s}return rd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw jh()}}function Dd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rd(e,t);var n=gd(e),r=gd(t),i=rd(n.seconds,r.seconds);return 0!==i?i:rd(n.nanos,r.nanos)}function Pd(e){return Od(e)}function Od(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=gd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?wd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Sd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=E(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Od(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=E(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Od(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):jh();var t,n}function Ld(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Md(e){return!!e&&"integerValue"in e}function Fd(e){return!!e&&"arrayValue"in e}function Ud(e){return!!e&&"nullValue"in e}function Vd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jd(e){return!!e&&"mapValue"in e}function qd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return cd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=qd(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qd(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Bd=function(){function e(t){s(this,e),this.value=t}return l(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!jd(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qd(t)}},{key:"setAll",value:function(e){var t=this,n=pd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=qd(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ad(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];jd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){cd(t,(function(t,n){return e[t]=n}));var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(qd(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function zd(e){var t=[];return cd(e.fields,(function(e,n){var r=new pd([e]);if(jd(n)){var i=zd(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=E(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new vd(t)}var Wd=function(){function e(t,n,r,i,a){s(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return l(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Bd.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Bd.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ud.min(),Bd.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Bd.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Bd.empty(),2)}}]),e}(),Kd=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;s(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null};function Hd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Kd(e,t,n,r,i,a,o)}function Gd(e){var t=Bh(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Pd(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Id(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=op(t.startAt)),t.endAt&&(n+="|ub:",n+=op(t.endAt)),t.R=n}return t.R}function Qd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!sp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ad(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lp(e.startAt,t.startAt)&&lp(e.endAt,t.endAt)}function Yd(e){return Sd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Jd=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return l(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Rd(t,this.value)):null!==t&&Cd(this.value)===Cd(t)&&this.v(Rd(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jh()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Xd(e,t,r):"array-contains"===t?new tp(e,r):"in"===t?new np(e,r):"not-in"===t?new rp(e,r):"array-contains-any"===t?new ip(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new $d(e,n):new Zd(e,n)}}]),n}(function(){return function e(){s(this,e)}}());var Xd=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,i)).key=Sd.fromName(i.referenceValue),a}return l(n,[{key:"matches",value:function(e){var t=Sd.comparator(e.key,this.key);return this.v(t)}}]),n}(Jd),$d=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"in",r)).keys=ep("in",r),i}return l(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Jd),Zd=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"not-in",r)).keys=ep("not-in",r),i}return l(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Jd);function ep(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Sd.fromName(e.referenceValue)}))}var tp=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains",r)}return l(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Fd(t)&&Nd(t.arrayValue,this.value)}}]),n}(Jd),np=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"in",r)}return l(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Nd(this.value.arrayValue,t)}}]),n}(Jd),rp=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"not-in",r)}return l(n,[{key:"matches",value:function(e){if(Nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Nd(this.value.arrayValue,t)}}]),n}(Jd),ip=function(e){h(n,e);var t=g(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains-any",r)}return l(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Fd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Nd(t.value.arrayValue,e)}))}}]),n}(Jd),ap=function e(t,n){s(this,e),this.position=t,this.before=n};function op(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Pd(e)})).join(","))}var up=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";s(this,e),this.field=t,this.dir=n};function sp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function cp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Sd.comparator(Sd.fromName(o.referenceValue),n.key):Rd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function lp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ad(e.position[n],t.position[n]))return!1;return!0}var fp=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;s(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=c,this.S=null,this.D=null,this.startAt,this.endAt};function hp(e,t,n,r,i,a,o,u){return new fp(e,t,n,r,i,a,o,u)}function dp(e){return new fp(e)}function pp(e){return!Id(e.limit)&&"F"===e.limitType}function vp(e){return!Id(e.limit)&&"L"===e.limitType}function yp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function mp(e){var t,n=E(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function gp(e){return null!==e.collectionGroup}function kp(e){var t=Bh(e);if(null===t.S){t.S=[];var n=mp(t),r=yp(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new up(n)),t.S.push(new up(pd.keyField(),"asc"));else{var i,a=!1,o=E(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new up(pd.keyField(),s))}}}return t.S}function wp(e){var t=Bh(e);if(!t.D)if("F"===t.limitType)t.D=Hd(t.path,t.collectionGroup,kp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=E(kp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new up(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ap(t.endAt.position,!t.endAt.before):null,s=t.startAt?new ap(t.startAt.position,!t.startAt.before):null;t.D=Hd(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function bp(e,t,n){return new fp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _p(e,t){return Qd(wp(e),wp(t))&&e.limitType===t.limitType}function xp(e){return"".concat(Gd(wp(e)),"|lt:").concat(e.limitType)}function Ip(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Pd(t.value));var t})).join(", "),"]")),Id(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+op(e.startAt)),e.endAt&&(t+=", endAt: "+op(e.endAt)),"Target(".concat(t,")")}(wp(e)),"; limitType=").concat(e.limitType,")")}function Ep(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Sd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=E(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=E(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!cp(e.startAt,kp(e),t))&&(!e.endAt||!cp(e.endAt,kp(e),t))}(e,t)}function Tp(e){return function(t,n){var r,i=!1,a=E(kp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Sp(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Sp(e,t,n){var r=e.field.isKeyField()?Sd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Rd(r,i):jh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jh()}}function Cp(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(t)?"-0":t}}function Ap(e){return{integerValue:""+e}}function Np(e,t){return Td(t)?Ap(t):Cp(e,t)}var Rp=function e(){s(this,e),this._=void 0};function Dp(e,t,n){return e instanceof Lp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mp?Fp(e,t):e instanceof Up?Vp(e,t):function(e,t){var n=Op(e,t),r=qp(n)+qp(e.N);return Md(n)&&Md(e.N)?Ap(r):Cp(e.k,r)}(e,t)}function Pp(e,t,n){return e instanceof Mp?Fp(e,t):e instanceof Up?Vp(e,t):n}function Op(e,t){return e instanceof jp?Md(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Lp=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(Rp),Mp=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return n}(Rp);function Fp(e,t){var n,r=Bp(t),i=E(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ad(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Up=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return n}(Rp);function Vp(e,t){var n,r=Bp(t),i=E(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ad(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var jp=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).k=e,i.N=r,i}return n}(Rp);function qp(e){return kd(e.integerValue||e.doubleValue)}function Bp(e){return Fd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var zp=function e(t,n){s(this,e),this.field=t,this.transform=n};var Wp=function e(t,n){s(this,e),this.version=t,this.transformResults=n},Kp=function(){function e(t,n){s(this,e),this.updateTime=t,this.exists=n}return l(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Hp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Gp=function e(){s(this,e)};function Qp(e,t,n){e instanceof Zp?function(e,t,n){var r=e.value.clone(),i=nv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ev?function(e,t,n){if(Hp(e.precondition,t)){var r=nv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yp(e,t,n){e instanceof Zp?function(e,t,n){if(Hp(e.precondition,t)){var r=e.value.clone(),i=rv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument($p(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ev?function(e,t,n){if(Hp(e.precondition,t)){var r=rv(e.fieldTransforms,n,t),i=t.data;i.setAll(tv(e)),i.setAll(r),t.convertToFoundDocument($p(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Hp(e.precondition,t)&&t.convertToNoDocument(ud.min())}(e,t)}function Jp(e,t){var n,r=null,i=E(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Op(a.transform,o||null);null!=u&&(null==r&&(r=Bd.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&id(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mp&&t instanceof Mp||e instanceof Up&&t instanceof Up?id(e.elements,t.elements,Ad):e instanceof jp&&t instanceof jp?Ad(e.N,t.N):e instanceof Lp&&t instanceof Lp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function $p(e){return e.isFoundDocument()?e.version:ud.min()}var Zp=function(e){h(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return s(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return n}(Gp),ev=function(e){h(n,e);var t=g(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return s(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return n}(Gp);function tv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function nv(e,t,n){var r=new Map;qh(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Pp(o,u,n[i]))}return r}function rv(e,t,n){var r,i=new Map,a=E(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Dp(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var iv,av,ov=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(Gp),uv=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(Gp),sv=function e(t){s(this,e),this.count=t};function cv(e){switch(e){default:return jh();case zh.CANCELLED:case zh.UNKNOWN:case zh.DEADLINE_EXCEEDED:case zh.RESOURCE_EXHAUSTED:case zh.INTERNAL:case zh.UNAVAILABLE:case zh.UNAUTHENTICATED:return!1;case zh.INVALID_ARGUMENT:case zh.NOT_FOUND:case zh.ALREADY_EXISTS:case zh.PERMISSION_DENIED:case zh.FAILED_PRECONDITION:case zh.ABORTED:case zh.OUT_OF_RANGE:case zh.UNIMPLEMENTED:case zh.DATA_LOSS:return!0}}function lv(e){if(void 0===e)return Fh("GRPC error has no .code"),zh.UNKNOWN;switch(e){case iv.OK:return zh.OK;case iv.CANCELLED:return zh.CANCELLED;case iv.UNKNOWN:return zh.UNKNOWN;case iv.DEADLINE_EXCEEDED:return zh.DEADLINE_EXCEEDED;case iv.RESOURCE_EXHAUSTED:return zh.RESOURCE_EXHAUSTED;case iv.INTERNAL:return zh.INTERNAL;case iv.UNAVAILABLE:return zh.UNAVAILABLE;case iv.UNAUTHENTICATED:return zh.UNAUTHENTICATED;case iv.INVALID_ARGUMENT:return zh.INVALID_ARGUMENT;case iv.NOT_FOUND:return zh.NOT_FOUND;case iv.ALREADY_EXISTS:return zh.ALREADY_EXISTS;case iv.PERMISSION_DENIED:return zh.PERMISSION_DENIED;case iv.FAILED_PRECONDITION:return zh.FAILED_PRECONDITION;case iv.ABORTED:return zh.ABORTED;case iv.OUT_OF_RANGE:return zh.OUT_OF_RANGE;case iv.UNIMPLEMENTED:return zh.UNIMPLEMENTED;case iv.DATA_LOSS:return zh.DATA_LOSS;default:return jh()}}(av=iv||(iv={}))[av.OK=0]="OK",av[av.CANCELLED=1]="CANCELLED",av[av.UNKNOWN=2]="UNKNOWN",av[av.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",av[av.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",av[av.NOT_FOUND=5]="NOT_FOUND",av[av.ALREADY_EXISTS=6]="ALREADY_EXISTS",av[av.PERMISSION_DENIED=7]="PERMISSION_DENIED",av[av.UNAUTHENTICATED=16]="UNAUTHENTICATED",av[av.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",av[av.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",av[av.ABORTED=10]="ABORTED",av[av.OUT_OF_RANGE=11]="OUT_OF_RANGE",av[av.UNIMPLEMENTED=12]="UNIMPLEMENTED",av[av.INTERNAL=13]="INTERNAL",av[av.UNAVAILABLE=14]="UNAVAILABLE",av[av.DATA_LOSS=15]="DATA_LOSS";var fv=function(){function e(t,n){s(this,e),this.comparator=t,this.root=n||dv.EMPTY}return l(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,dv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new hv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new hv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new hv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new hv(this.root,e,this.comparator,!0)}}]),e}(),hv=function(){function e(t,n,r,i){s(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return l(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),dv=function(){function e(t,n,r,i,a){s(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return l(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw jh();if(this.right.isRed())throw jh();var e=this.left.check();if(e!==this.right.check())throw jh();return e+(this.isRed()?0:1)}}]),e}();dv.EMPTY=null,dv.RED=!0,dv.BLACK=!1,dv.EMPTY=new(function(){function e(){s(this,e),this.size=0}return l(e,[{key:"key",get:function(){throw jh()}},{key:"value",get:function(){throw jh()}},{key:"color",get:function(){throw jh()}},{key:"left",get:function(){throw jh()}},{key:"right",get:function(){throw jh()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new dv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var pv=function(){function e(t){s(this,e),this.comparator=t,this.data=new fv(this.comparator)}return l(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new vv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new vv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),vv=function(){function e(t){s(this,e),this.iter=t}return l(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),yv=new fv(Sd.comparator);function mv(){return yv}var gv=new fv(Sd.comparator);function kv(){return gv}var wv=new fv(Sd.comparator);function bv(){return wv}var _v=new pv(Sd.comparator);function xv(){for(var e=_v,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Iv=new pv(rd);function Ev(){return Iv}var Tv=function(){function e(t,n,r,i,a){s(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return l(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Sv.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ud.min(),r,Ev(),mv(),xv())}}]),e}(),Sv=function(){function e(t,n,r,i,a){s(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return l(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(yd.EMPTY_BYTE_STRING,n,xv(),xv(),xv())}}]),e}(),Cv=function e(t,n,r,i){s(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i},Av=function e(t,n){s(this,e),this.targetId=t,this.O=n},Nv=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Rv=function(){function e(){s(this,e),this.M=0,this.L=Ov(),this.B=yd.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return l(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=xv(),t=xv(),n=xv();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jh()}})),new Sv(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=Ov()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Dv=function(){function e(t){s(this,e),this.et=t,this.nt=new Map,this.st=mv(),this.it=Pv(),this.rt=new pv(rd)}return l(e,[{key:"ot",value:function(e){var t,n=E(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=E(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:jh()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(Yd(i))if(0===n){var a=new Sd(i.path);this.ct(t,a,Wd.newNoDocument(a,ud.min()))}else qh(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Yd(a.target)){var o=new Sd(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,Wd.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=xv();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Tv(e,n,this.rt,this.st,r);return this.st=mv(),this.it=Pv(),this.rt=new pv(rd),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Rv,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new pv(rd),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Mh("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Rv),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Pv(){return new fv(Sd.comparator)}function Ov(){return new fv(Sd.comparator)}var Lv={asc:"ASCENDING",desc:"DESCENDING"},Mv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fv=function e(t,n){s(this,e),this.databaseId=t,this.C=n};function Uv(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vv(e,t){return e.C?t.toBase64():t.toUint8Array()}function jv(e,t){return Uv(e,t.toTimestamp())}function qv(e){return qh(!!e),ud.fromTimestamp(function(e){var t=gd(e);return new od(t.seconds,t.nanos)}(e))}function Bv(e,t){return function(e){return new hd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function zv(e){var t=hd.fromString(e);return qh(py(t)),t}function Wv(e,t){return Bv(e.databaseId,t.path)}function Kv(e,t){var n=zv(t);if(n.get(1)!==e.databaseId.projectId)throw new Wh(zh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wh(zh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Sd(Yv(n))}function Hv(e,t){return Bv(e.databaseId,t)}function Gv(e){var t=zv(e);return 4===t.length?hd.emptyPath():Yv(t)}function Qv(e){return new hd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yv(e){return qh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jv(e,t,n){return{name:Wv(e,t),fields:n.value.mapValue.fields}}function Xv(e,t,n){var r=Kv(e,t.name),i=qv(t.updateTime),a=new Bd({mapValue:{fields:t.fields}}),o=Wd.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function $v(e,t){return"found"in t?function(e,t){qh(!!t.found),t.found.name,t.found.updateTime;var n=Kv(e,t.found.name),r=qv(t.found.updateTime),i=new Bd({mapValue:{fields:t.found.fields}});return Wd.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){qh(!!t.missing),qh(!!t.readTime);var n=Kv(e,t.missing),r=qv(t.readTime);return Wd.newNoDocument(n,r)}(e,t):jh()}function Zv(e,t){var n;if(t instanceof Zp)n={update:Jv(e,t.key,t.value)};else if(t instanceof ov)n={delete:Wv(e,t.key)};else if(t instanceof ev)n={update:Jv(e,t.key,t.data),updateMask:dy(t.fieldMask)};else{if(!(t instanceof uv))return jh();n={verify:Wv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Lp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Up)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jp)return{fieldPath:t.field.canonicalString(),increment:n.N};throw jh()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jh()}(e,t.precondition)),n}function ey(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Kp.updateTime(qv(e.updateTime)):void 0!==e.exists?Kp.exists(e.exists):Kp.none()}(t.currentDocument):Kp.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)qh("REQUEST_TIME"===t.setToServerValue),n=new Lp;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Mp(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Up(i)}else"increment"in t?n=new jp(e,t.increment):jh();var a=pd.fromServerFormat(t.fieldPath);return new zp(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Kv(e,t.update.name),a=new Bd({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new vd(t.map((function(e){return pd.fromServerFormat(e)})))}(t.updateMask);return new ev(i,a,o,n,r)}return new Zp(i,a,n,r)}if(t.delete){var u=Kv(e,t.delete);return new ov(u,n)}if(t.verify){var s=Kv(e,t.verify);return new uv(s,n)}return jh()}function ty(e,t){return{documents:[Hv(e,t.path)]}}function ny(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Hv(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Hv(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Vd(e.value))return{unaryFilter:{field:cy(e.field),op:"IS_NAN"}};if(Ud(e.value))return{unaryFilter:{field:cy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vd(e.value))return{unaryFilter:{field:cy(e.field),op:"IS_NOT_NAN"}};if(Ud(e.value))return{unaryFilter:{field:cy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cy(e.field),op:sy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:cy(e.field),direction:uy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||Id(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=ay(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ay(t.endAt)),n}function ry(e){var t=Gv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qh(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=iy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new up(ly(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Id(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=oy(n.startAt));var l=null;return n.endAt&&(l=oy(n.endAt)),hp(t,i,u,o,s,"F",c,l)}function iy(e){return e?void 0!==e.unaryFilter?[hy(e)]:void 0!==e.fieldFilter?[fy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return iy(e)})).reduce((function(e,t){return e.concat(t)})):jh():[]}function ay(e){return{before:e.before,values:e.position}}function oy(e){var t=!!e.before,n=e.values||[];return new ap(n,t)}function uy(e){return Lv[e]}function sy(e){return Mv[e]}function cy(e){return{fieldPath:e.canonicalString()}}function ly(e){return pd.fromServerFormat(e.fieldPath)}function fy(e){return Jd.create(ly(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jh()}}(e.fieldFilter.op),e.fieldFilter.value)}function hy(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ly(e.unaryFilter.field);return Jd.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ly(e.unaryFilter.field);return Jd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ly(e.unaryFilter.field);return Jd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ly(e.unaryFilter.field);return Jd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jh()}}function dy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function py(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function vy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=my(t)),t=yy(e.get(n),t);return my(t)}function yy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function my(e){return e+"\x01\x01"}function gy(e){var t=e.length;if(qh(t>=2),2===t)return qh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),hd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&jh(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:jh()}a=o+2}return new hd(r)}var ky=function e(t,n){s(this,e),this.seconds=t,this.nanoseconds=n},wy=function e(t,n,r){s(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};wy.store="owner",wy.key="owner";var by=function e(t,n,r){s(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};by.store="mutationQueues",by.keyPath="userId";var _y=function e(t,n,r,i,a){s(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a};_y.store="mutations",_y.keyPath="batchId",_y.userMutationsIndex="userMutationsIndex",_y.userMutationsKeyPath=["userId","batchId"];var xy=function(){function e(){s(this,e)}return l(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,vy(t)]}},{key:"key",value:function(e,t,n){return[e,vy(t),n]}}]),e}();xy.store="documentMutations",xy.PLACEHOLDER=new xy;var Iy=function e(t,n){s(this,e),this.path=t,this.readTime=n},Ey=function e(t,n){s(this,e),this.path=t,this.version=n},Ty=function e(t,n,r,i,a,o){s(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o};Ty.store="remoteDocuments",Ty.readTimeIndex="readTimeIndex",Ty.readTimeIndexPath="readTime",Ty.collectionReadTimeIndex="collectionReadTimeIndex",Ty.collectionReadTimeIndexPath=["parentPath","readTime"];var Sy=function e(t){s(this,e),this.byteSize=t};Sy.store="remoteDocumentGlobal",Sy.key="remoteDocumentGlobalKey";var Cy=function e(t,n,r,i,a,o,u){s(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u};Cy.store="targets",Cy.keyPath="targetId",Cy.queryTargetsIndexName="queryTargetsIndex",Cy.queryTargetsKeyPath=["canonicalId","targetId"];var Ay=function e(t,n,r){s(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};Ay.store="targetDocuments",Ay.keyPath=["targetId","path"],Ay.documentTargetsIndex="documentTargetsIndex",Ay.documentTargetsKeyPath=["path","targetId"];var Ny=function e(t,n,r,i){s(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Ny.key="targetGlobalKey",Ny.store="targetGlobal";var Ry=function e(t,n){s(this,e),this.collectionId=t,this.parent=n};Ry.store="collectionParents",Ry.keyPath=["collectionId","parent"];var Dy=function e(t,n,r,i){s(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};Dy.store="clientMetadata",Dy.keyPath="clientId";var Py=function e(t,n,r){s(this,e),this.bundleId=t,this.createTime=n,this.version=r};Py.store="bundles",Py.keyPath="bundleId";var Oy=function e(t,n,r){s(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};Oy.store="namedQueries",Oy.keyPath="name";var Ly=[by.store,_y.store,xy.store,Ty.store,Cy.store,wy.store,Ny.store,Ay.store].concat([Dy.store]).concat([Sy.store]).concat([Ry.store]).concat([Py.store,Oy.store]),My="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fy=function(){function e(){s(this,e),this.onCommittedListeners=[]}return l(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Uy=function(){function e(t){var n=this;s(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return l(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&jh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=E(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Vy=function(){function e(t,n){var r=this;s(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new Kh,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new By(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=Gy(e.target.error);r.It.reject(new By(t,n))}}return l(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Mh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Wy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new By(n,t)}}}]),e}(),jy=function(){function e(t,n,r){s(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(U())&&Fh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return l(e,[{key:"Ct",value:function(){var e=oe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Mh("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new By(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Wh(zh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Wh(zh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new By(t,n))},i.onupgradeneeded=function(e){Mh("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Mh("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=oe(se().mark((function e(t,n,r,i){var a,o,u,s,c=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(se().mark((function e(){var n,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=Vy.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),Uy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Mh("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Mh("SimpleDb","Removing database:",e),Ky(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!W())return!1;if(e.vt())return!0;var t=U(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/ExpenseCalculator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),qy=function(){function e(t){s(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return l(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return Ky(this.$t.delete())}}]),e}(),By=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,zh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(Wh);function zy(e){return"IndexedDbTransactionError"===e.name}var Wy=function(){function e(t){s(this,e),this.store=t}return l(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Mh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Mh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ky(n)}},{key:"add",value:function(e){return Mh("SimpleDb","ADD",this.store.name,e,e),Ky(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ky(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Mh("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Mh("SimpleDb","DELETE",this.store.name,e),Ky(this.store.delete(e))}},{key:"count",value:function(){return Mh("SimpleDb","COUNT",this.store.name),Ky(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Mh("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new Uy((function(n,r){t.onerror=function(e){var t=Gy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new Uy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new qy(i),o=t(i.primaryKey,i.value,a);if(o instanceof Uy){var u=o.catch((function(e){return a.done(),Uy.reject(e)}));n.push(u)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return Uy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ky(e){return new Uy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Gy(e.target.error);n(t)}}))}var Hy=!1;function Gy(e){var t=jy.Pt(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Wh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Hy||(Hy=!0,setTimeout((function(){throw r}),0)),r}}return e}var Qy=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return n}(Fy);function Yy(e,t){var n=Bh(e);return jy.Dt(n.Wt,t)}var Jy=function(){function e(t,n,r,i){s(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return l(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Qp(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=E(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Yp(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=E(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Yp(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ud.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),xv())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&id(this.mutations,e.mutations,(function(e,t){return Xp(e,t)}))&&id(this.baseMutations,e.baseMutations,(function(e,t){return Xp(e,t)}))}}]),e}(),Xy=function(){function e(t,n,r,i){s(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return l(e,null,[{key:"from",value:function(t,n,r){qh(t.mutations.length===r.length);for(var i=bv(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),$y=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ud.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ud.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yd.EMPTY_BYTE_STRING;s(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return l(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Zy=function e(t){s(this,e),this.Gt=t};function em(e,t){if(t.document)return Xv(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Sd.fromSegments(t.noDocument.path),r=am(t.noDocument.readTime),i=Wd.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Sd.fromSegments(t.unknownDocument.path),o=am(t.unknownDocument.version);return Wd.newUnknownDocument(a,o)}return jh()}function tm(e,t,n){var r=nm(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Wv(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Uv(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new Ty(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=im(t.version),c=t.hasCommittedMutations;return new Ty(null,new Iy(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=im(t.version);return new Ty(new Ey(l,f),null,null,!0,r,i)}return jh()}function nm(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rm(e){var t=new od(e[0],e[1]);return ud.fromTimestamp(t)}function im(e){var t=e.toTimestamp();return new ky(t.seconds,t.nanoseconds)}function am(e){var t=new od(e.seconds,e.nanoseconds);return ud.fromTimestamp(t)}function om(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ey(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ey(e.Gt,t)})),u=od.fromMillis(t.localWriteTimeMs);return new Jy(t.batchId,u,n,o)}function um(e){var t,n,r=am(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?am(e.lastLimboFreeSnapshotVersion):ud.min();return void 0!==e.query.documents?(qh(1===(n=e.query).documents.length),t=wp(dp(Gv(n.documents[0])))):t=function(e){return wp(ry(e))}(e.query),new $y(t,e.targetId,0,e.lastListenSequenceNumber,r,i,yd.fromBase64String(e.resumeToken))}function sm(e,t){var n,r=im(t.snapshotVersion),i=im(t.lastLimboFreeSnapshotVersion);n=Yd(t.target)?ty(e.Gt,t.target):ny(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Cy(t.targetId,Gd(t.target),r,a,t.sequenceNumber,i,n)}function cm(e){var t=ry({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bp(t,t.limit,"L"):t}var lm=function(){function e(){s(this,e)}return l(e,[{key:"getBundleMetadata",value:function(e,t){return fm(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:am(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return fm(e).put({bundleId:(n=t).id,createTime:im(qv(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return hm(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:cm(t.bundledQuery),readTime:am(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return hm(e).put(function(e){return{name:e.name,readTime:im(qv(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function fm(e){return Yy(e,Py.store)}function hm(e){return Yy(e,Oy.store)}var dm=function(){function e(){s(this,e),this.zt=new pm}return l(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),Uy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Uy.resolve(this.zt.getEntries(t))}}]),e}(),pm=function(){function e(){s(this,e),this.index={}}return l(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pv(hd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new pv(hd.comparator)).toArray()}}]),e}(),vm=function(){function e(){s(this,e),this.Ht=new pm}return l(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:vy(i)};return ym(e).put(a)}return Uy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ad(t),""],!1,!0);return ym(e).Bt(r).next((function(e){var r,i=E(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(gy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function ym(e){return Yy(e,Ry.store)}var mm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gm=function(){function e(t,n,r){s(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return l(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function km(e,t,n){var r=e.store(_y.store),i=e.store(xy.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){qh(1===u)})));var c,l=[],f=E(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=xy.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Uy.waitFor(a).next((function(){return l}))}function wm(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jh();t=e.noDocument}return JSON.stringify(t).length}gm.DEFAULT_COLLECTION_PERCENTILE=10,gm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gm.DEFAULT=new gm(41943040,gm.DEFAULT_COLLECTION_PERCENTILE,gm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gm.DISABLED=new gm(-1,0,0);var bm=function(){function e(t,n,r,i){s(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return l(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xm(e).jt({index:_y.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Im(e),o=xm(e);return o.add({}).next((function(u){qh("number"==typeof u);var s,c=new Jy(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Zv(e.Gt,t)})),i=n.mutations.map((function(t){return Zv(e.Gt,t)}));return new _y(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new pv((function(e,t){return rd(e.canonicalString(),t.canonicalString())})),d=E(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=xy.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,xy.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),Uy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return xm(e).get(t).next((function(e){return e?(qh(e.userId===n.userId),om(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?Uy.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return xm(e).jt({index:_y.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(qh(t.batchId>=r),a=om(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xm(e).jt({index:_y.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xm(e).Bt(_y.userMutationsIndex,n).next((function(e){return e.map((function(e){return om(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=xy.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Im(e).jt({range:i},(function(r,i,o){var u=C(r,3),s=u[0],c=u[1],l=u[2],f=gy(c);if(s===n.userId&&t.path.isEqual(f))return xm(e).get(l).next((function(e){if(!e)throw jh();qh(e.userId===n.userId),a.push(om(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pv(rd),i=[];return t.forEach((function(t){var a=xy.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Im(e).jt({range:o},(function(e,i,a){var o=C(e,3),u=o[0],s=o[1],c=o[2],l=gy(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Uy.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=xy.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new pv(rd);return Im(e).jt({range:o},(function(e,t,a){var o=C(e,3),s=o[0],c=o[1],l=o[2],f=gy(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(xm(e).get(t).next((function(e){if(null===e)throw jh();qh(e.userId===n.userId),r.push(om(n.k,e))})))})),Uy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return km(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),Uy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Uy.resolve();var r=IDBKeyRange.lowerBound(xy.prefixForUser(t.userId)),i=[];return Im(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=gy(e[1]);i.push(a)}else r.done()})).next((function(){qh(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return _m(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Em(e).get(this.userId).next((function(e){return e||new by(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return qh(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function _m(e,t,n){var r=xy.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Im(e).jt({range:a,Kt:!0},(function(e,n,r){var a=C(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function xm(e){return Yy(e,_y.store)}function Im(e){return Yy(e,xy.store)}function Em(e){return Yy(e,by.store)}var Tm=function(){function e(t){s(this,e),this.se=t}return l(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Sm=function(){function e(t,n){s(this,e),this.referenceDelegate=t,this.k=n}return l(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Tm(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return ud.fromTimestamp(new od(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Cm(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return qh(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Cm(e).jt((function(o,u){var s=um(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Uy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Cm(e).jt((function(e,n){var r=um(n);t(r)}))}},{key:"oe",value:function(e){return Am(e).get(Ny.key).next((function(e){return qh(null!==e),e}))}},{key:"ae",value:function(e,t){return Am(e).put(Ny.key,t)}},{key:"ce",value:function(e,t){return Cm(e).put(sm(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Gd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cm(e).jt({range:r,index:Cy.queryTargetsIndexName},(function(e,n,r){var a=um(n);Qd(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Nm(e);return t.forEach((function(t){var o=vy(t.path);i.push(a.put(new Ay(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Uy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Nm(e);return Uy.forEach(t,(function(t){var a=vy(t.path);return Uy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Nm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Nm(e),i=xv();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=gy(e[1]),a=new Sd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=vy(t.path),r=IDBKeyRange.bound([n],[ad(n)],!1,!0),i=0;return Nm(e).jt({index:Ay.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=C(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Cm(e).get(t).next((function(e){return e?um(e):null}))}}]),e}();function Cm(e){return Yy(e,Cy.store)}function Am(e){return Yy(e,Ny.store)}function Nm(e){return Yy(e,Ay.store)}function Rm(e){return Dm.apply(this,arguments)}function Dm(){return Dm=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===zh.FAILED_PRECONDITION&&t.message===My){e.next=2;break}throw t;case 2:Mh("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Dm.apply(this,arguments)}function Pm(e,t){var n=C(e,2),r=n[0],i=n[1],a=C(t,2),o=a[0],u=a[1],s=rd(r,o);return 0===s?rd(i,u):s}var Om=function(){function e(t){s(this,e),this.he=t,this.buffer=new pv(Pm),this.le=0}return l(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Pm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Lm=function(){function e(t,n){s(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return l(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Mh("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!zy(n.t0)){n.next=12;break}Mh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Rm(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Mm=function(){function e(t,n){s(this,e),this.ge=t,this.params=n}return l(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Uy.resolve(ed.I);var r=new Om(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mh("LruGarbageCollector","Garbage collection skipped; disabled"),Uy.resolve(mm)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),mm):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Mh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Lh()<=de.DEBUG&&Mh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Uy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Fm=function(){function e(t,n){s(this,e),this.db=t,this.garbageCollector=function(e,t){return new Mm(e,t)}(this,n)}return l(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Um(e,n)}},{key:"removeReference",value:function(e,t,n){return Um(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Um(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Em(e).Qt((function(r){return _m(e,r,t).next((function(e){return e&&(n=!0),Uy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Nm(e).delete([0,vy(o.path)])}))}));i.push(s)}})).next((function(){return Uy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Um(e,t)}},{key:"Ie",value:function(e,t){var n,r=Nm(e),i=ed.I;return r.jt({index:Ay.documentTargetsIndex},(function(e,r){var a=C(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ed.I&&t(new Sd(gy(n)),i),i=s,n=u):i=ed.I})).next((function(){i!==ed.I&&t(new Sd(gy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Um(e,t){return Nm(e).put(function(e,t){return new Ay(0,vy(e.path),t)}(t,e.currentSequenceNumber))}var Vm=function(){function e(t,n){s(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return l(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=C(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){cd(this.inner,(function(t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=C(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ld(this.inner)}}]),e}(),jm=function(){function e(){s(this,e),this.changes=new Vm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return l(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:ud.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Wd.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Uy.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),qm=function(){function e(t,n){s(this,e),this.k=t,this.Jt=n}return l(e,[{key:"addEntry",value:function(e,t,n){return Wm(e).put(Km(t),n)}},{key:"removeEntry",value:function(e,t){var n=Wm(e),r=Km(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Wm(e).get(Km(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Wm(e).get(Km(t)).next((function(e){return{document:n.Pe(t,e),size:wm(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=mv();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=mv(),i=new fv(Sd.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,wm(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return Uy.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Wm(e).jt({range:r},(function(e,t,r){for(var o=Sd.fromSegments(e);a&&Sd.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=mv(),a=t.path.length+1,o={};if(n.isEqual(ud.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=nm(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=Ty.collectionReadTimeIndex}return Wm(e).jt(o,(function(e,n,o){if(e.length===a){var u=em(r.k,n);t.path.isPrefixOf(u.key.path)?Ep(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Bm(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zm(e).get(Sy.key).next((function(e){return qh(!!e),e}))}},{key:"Re",value:function(e,t){return zm(e).put(Sy.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=em(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(ud.min()))return n}return Wd.newInvalidDocument(e)}}]),e}(),Bm=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new Vm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return l(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new pv((function(e,t){return rd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=tm(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=wm(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=tm(t.De.k,Wd.newNoDocument(a,ud.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),Uy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(jm);function zm(e){return Yy(e,Sy.store)}function Wm(e){return Yy(e,Ty.store)}function Km(e){return e.path.toArray()}var Hm=function(){function e(t){s(this,e),this.k=t}return l(e,[{key:"Nt",value:function(e,t,n,r){var i=this;qh(n<r&&n>=0&&r<=11);var a=new Vy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(wy.store)}(e),function(e){e.createObjectStore(by.store,{keyPath:by.keyPath}),e.createObjectStore(_y.store,{keyPath:_y.keyPath,autoIncrement:!0}).createIndex(_y.userMutationsIndex,_y.userMutationsKeyPath,{unique:!0}),e.createObjectStore(xy.store)}(e),Gm(e),function(e){e.createObjectStore(Ty.store)}(e));var o=Uy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ay.store),e.deleteObjectStore(Cy.store),e.deleteObjectStore(Ny.store)}(e),Gm(e)),o=o.next((function(){return function(e){var t=e.store(Ny.store),n=new Ny(0,0,ud.min().toTimestamp(),0);return t.put(Ny.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(_y.store).Bt().next((function(n){e.deleteObjectStore(_y.store),e.createObjectStore(_y.store,{keyPath:_y.keyPath,autoIncrement:!0}).createIndex(_y.userMutationsIndex,_y.userMutationsKeyPath,{unique:!0});var r=t.store(_y.store),i=n.map((function(e){return r.put(e)}));return Uy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Dy.store,{keyPath:Dy.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Sy.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Ty.store);t.createIndex(Ty.readTimeIndex,Ty.readTimeIndexPath,{unique:!1}),t.createIndex(Ty.collectionReadTimeIndex,Ty.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Py.store,{keyPath:Py.keyPath})}(e),function(e){e.createObjectStore(Oy.store,{keyPath:Oy.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(Ty.store).jt((function(e,n){t+=wm(n)})).next((function(){var n=new Sy(t);return e.store(Sy.store).put(Sy.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(by.store),r=e.store(_y.store);return n.Bt().next((function(n){return Uy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(_y.userMutationsIndex,i).next((function(r){return Uy.forEach(r,(function(r){qh(r.userId===n.userId);var i=om(t.k,r);return km(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Ay.store),n=e.store(Ty.store);return e.store(Ny.store).get(Ny.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new hd(n),o=function(e){return[0,vy(e)]}(a);r.push(t.get(o).next((function(n){return n?Uy.resolve():function(n){return t.put(new Ay(0,vy(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Uy.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(Ry.store,{keyPath:Ry.keyPath});var n=t.store(Ry.store),r=new pm,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:vy(i)})}};return t.store(Ty.store).jt({Kt:!0},(function(e,t){var n=new hd(e);return i(n.popLast())})).next((function(){return t.store(xy.store).jt({Kt:!0},(function(e,t){var n=C(e,3),r=(n[0],n[1]),a=(n[2],gy(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(Cy.store);return n.jt((function(e,r){var i=um(r),a=sm(t.k,i);return n.put(a)}))}}]),e}();function Gm(e){e.createObjectStore(Ay.store,{keyPath:Ay.keyPath}).createIndex(Ay.documentTargetsIndex,Ay.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Cy.store,{keyPath:Cy.keyPath}).createIndex(Cy.queryTargetsIndexName,Cy.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ny.store)}var Qm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ym=function(){function e(t,n,r,i,a,o,u,c,l,f){if(s(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Me=l,this.Le=f,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new Wh(zh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fm(this,i),this.Ge=n+"main",this.k=new Zy(c),this.ze=new jy(this.Ge,11,new Hm(this.k)),this.He=new Sm(this.referenceDelegate,this.k),this.Jt=new vm,this.Je=function(e,t){return new qm(e,t)}(this.k,this.Jt),this.Ye=new lm,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===f&&Fh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return l(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Wh(zh.FAILED_PRECONDITION,Qm);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new ed(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=oe(se().mark((function n(r){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=oe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Xm(t).put(new Dy(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(zy(t))return Mh("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Mh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return Jm(e).get(wy.key).next((function(e){return Uy.resolve(t.un(e))}))}},{key:"hn",value:function(e){return Xm(e).delete(this.clientId)}},{key:"ln",value:function(){var e=oe(se().mark((function e(){var t,n,r,i,a=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Yy(e,Dy.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Uy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=E(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?Uy.resolve(!0):Jm(e).get(wy.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Wh(zh.FAILED_PRECONDITION,Qm);return!1}}return!(!t.networkEnabled||!t.inForeground)||Xm(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Mh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=oe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[wy.store,Dy.store],(function(e){var n=new Qy(e,ed.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Xm(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return bm.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Mh("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,Ly,(function(a){return i=new Qy(a,r.Be?r.Be.next():ed.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw Fh("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new Wh(zh.FAILED_PRECONDITION,My);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return Jm(e).get(wy.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Wh(zh.FAILED_PRECONDITION,Qm)}))}},{key:"cn",value:function(e){var t=new wy(this.clientId,this.allowTabSynchronization,Date.now());return Jm(e).put(wy.key,t)}},{key:"an",value:function(e){var t=this,n=Jm(e);return n.get(wy.key).next((function(e){return t.un(e)?(Mh("IndexedDbPersistence","Releasing primary lease."),n.delete(wy.key)):Uy.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Fh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!j()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Mh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Fh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(Rs){Fh("Failed to set zombie client id.",Rs)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(Rs){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return jy.bt()}}]),e}();function Jm(e){return Yy(e,wy.store)}function Xm(e){return Yy(e,Dy.store)}function $m(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Zm=function e(t,n){s(this,e),this.progress=t,this.In=n},eg=function(){function e(t,n,r){s(this,e),this.Je=t,this.An=n,this.Jt=r}return l(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=E(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=E(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Sd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):gp(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Sd(t)).next((function(e){var t=kv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=kv();return this.Jt.getCollectionParents(e,i).next((function(o){return Uy.forEach(o,(function(o){var u=function(e,t){return new fp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=E(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=E(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=Wd.newInvalidDocument(c),r=r.insert(c,l)),Yp(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Ep(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=xv(),a=E(t);try{for(a.s();!(r=a.n()).done;){var o,u=E(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof ev&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),tg=function(){function e(t,n,r,i){s(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return l(e,null,[{key:"$n",value:function(t,n){var r,i=xv(),a=xv(),o=E(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ng=function(){function e(){s(this,e)}return l(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ud.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(pp(t)||vp(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(Lh()<=de.DEBUG&&Mh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ip(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new pv(Tp(e));return t.forEach((function(t,r){Ep(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return Lh()<=de.DEBUG&&Mh("QueryEngine","Using full collection scan to execute query:",Ip(t)),this.On.getDocumentsMatchingQuery(e,t,ud.min())}}]),e}(),rg=function(){function e(t,n,r,i){s(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new fv(rd),this.Kn=new Vm((function(e){return Gd(e)}),Qd),this.jn=ud.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new eg(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return l(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function ig(e,t,n,r){return new rg(e,t,n,r)}function ag(e,t){return og.apply(this,arguments)}function og(){return og=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new eg(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=xv(),s=E(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=E(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=E(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=E(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),og.apply(this,arguments)}function ug(e,t){var n=Bh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Uy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);qh(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function sg(e){var t=Bh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function cg(e,t){var n=Bh(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return qh(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var u=mv();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lg(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(ud.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Uy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function lg(e,t,n,r,i){var a=xv();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=mv();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ud.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):Mh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function fg(e,t){var n=Bh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function hg(e,t){var n=Bh(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,Uy.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new $y(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function dg(e,t,n){return pg.apply(this,arguments)}function pg(){return pg=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Bh(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),zy(e.t1)){e.next=12;break}throw e.t1;case 12:Mh("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pg.apply(this,arguments)}function vg(e,t,n){var r=Bh(e),i=ud.min(),a=xv();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Bh(e),i=r.Kn.get(n);return void 0!==i?Uy.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,wp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:ud.min(),n?a:xv())})).next((function(e){return{documents:e,zn:a}}))}))}function yg(e,t){var n=Bh(e),r=Bh(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function mg(e){var t=Bh(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Bh(e),i=mv(),a=nm(n),o=Wm(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:Ty.readTimeIndex,range:u},(function(e,t){var n=em(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:rm(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function gg(e){return kg.apply(this,arguments)}function kg(){return kg=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bh(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Wm(e),n=ud.min();return t.jt({index:Ty.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=rm(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),kg.apply(this,arguments)}function wg(e,t,n,r){return bg.apply(this,arguments)}function bg(){return bg=oe(se().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Bh(t),o=xv(),u=mv(),s=bv(),c=E(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,hg(a,function(e){return wp(dp(hd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return lg(e,d,u,ud.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),bg.apply(this,arguments)}function _g(e,t){return xg.apply(this,arguments)}function xg(){return xg=oe(se().mark((function e(t,n){var r,i,a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:xv(),e.next=3,hg(t,wp(cm(n.bundledQuery)));case 3:return i=e.sent,a=Bh(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=qv(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(yd.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),xg.apply(this,arguments)}var Ig=function(){function e(t){s(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return l(e,[{key:"getBundleMetadata",value:function(e,t){return Uy.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:qv(n.createTime)}),Uy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Uy.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:cm(e.bundledQuery),readTime:qv(e.readTime)}}(t)),Uy.resolve()}}]),e}(),Eg=function(){function e(){s(this,e),this.ts=new pv(Tg.es),this.ns=new pv(Tg.ss)}return l(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Tg(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Tg(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Sd(new hd([])),r=new Tg(n,e),i=new Tg(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Sd(new hd([])),n=new Tg(t,e),r=new Tg(t,e+1),i=xv();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Tg(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Tg=function(){function e(t,n){s(this,e),this.key=t,this.fs=n}return l(e,null,[{key:"es",value:function(e,t){return Sd.comparator(e.key,t.key)||rd(e.fs,t.fs)}},{key:"ss",value:function(e,t){return rd(e.fs,t.fs)||Sd.comparator(e.key,t.key)}}]),e}(),Sg=function(){function e(t,n){s(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new pv(Tg.es)}return l(e,[{key:"checkEmpty",value:function(e){return Uy.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new Jy(i,t,n,r);this.An.push(a);var o,u=E(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new Tg(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Uy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Uy.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return Uy.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Uy.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return Uy.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Tg(t,0),i=new Tg(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),Uy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pv(rd);return t.forEach((function(e){var t=new Tg(e,0),i=new Tg(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),Uy.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Sd.isDocumentKey(i)||(i=i.child(""));var a=new Tg(new Sd(i),0),o=new pv(rd);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),Uy.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;qh(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return Uy.forEach(t.mutations,(function(i){var a=new Tg(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Tg(t,0),r=this.ws.firstAfterOrEqual(n);return Uy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,Uy.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Cg=function(){function e(t,n){s(this,e),this.Jt=t,this.Ts=n,this.docs=new fv(Sd.comparator),this.size=0}return l(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Uy.resolve(n?n.document.clone():Wd.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=mv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Wd.newInvalidDocument(e))})),Uy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=mv(),i=new Sd(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Ep(t,c)&&(r=r.insert(c.key,c.clone()))}return Uy.resolve(r)}},{key:"Es",value:function(e,t){return Uy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ag(this)}},{key:"getSize",value:function(e){return Uy.resolve(this.size)}}]),e}(),Ag=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).De=e,r}return l(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),Uy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(jm),Ng=function(){function e(t){s(this,e),this.persistence=t,this.Is=new Vm((function(e){return Gd(e)}),Qd),this.lastRemoteSnapshotVersion=ud.min(),this.highestTargetId=0,this.As=0,this.Rs=new Eg,this.targetCount=0,this.Ps=Tm.ie()}return l(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),Uy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Uy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Uy.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),Uy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Uy.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new Tm(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,Uy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),Uy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Uy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Uy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Uy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return Uy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),Uy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Uy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),Uy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return Uy.resolve(n)}},{key:"containsKey",value:function(e,t){return Uy.resolve(this.Rs.containsKey(t))}}]),e}(),Rg=function(){function e(t,n){var r=this;s(this,e),this.bs={},this.Be=new ed(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Ng(this),this.Jt=new dm,this.Je=function(e,t){return new Cg(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new Zy(n),this.Ye=new Ig(this.k)}return l(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Sg(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Mh("MemoryPersistence","Starting transaction:",e);var i=new Dg(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return Uy.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Dg=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(Fy),Pg=function(){function e(t){s(this,e),this.persistence=t,this.Cs=new Eg,this.Ns=null}return l(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw jh()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Uy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Uy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Uy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Uy.forEach(this.xs,(function(r){var i=Sd.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Uy.or([function(){return Uy.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function Og(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Lg(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Mg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Fg=function(){function e(t,n,r,i){s(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return l(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Wh(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Fh("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ug=function(){function e(t,n,r){s(this,e),this.targetId=t,this.state=n,this.error=r}return l(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wh(i.error.code,i.error.message))),a?new e(t,i.state,r):(Fh("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Vg=function(){function e(t,n){s(this,e),this.clientId=t,this.activeTargetIds=n}return l(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ev(),o=0;i&&o<r.activeTargetIds.length;++o)i=Td(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Fh("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),jg=function(){function e(t,n){s(this,e),this.clientId=t,this.onlineState=n}return l(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Fh("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qg=function(){function e(){s(this,e),this.activeTargetIds=Ev()}return l(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Bg=function(){function e(t,n,r,i,a){s(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new fv(rd),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=Og(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new qg),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return l(e,[{key:"start",value:function(){var e=oe(se().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=E(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Og(this.persistenceKey,i)))&&(o=Vg.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=E(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Mg(this.persistenceKey,e));if(n){var r=Ug.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Mg(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Mh("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Mh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Mh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Mh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Fh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(oe(se().mark((function e(){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=ed.I;if(null!=e)try{var n=JSON.parse(e);qh("number"==typeof n),t=n}catch(e){Fh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ed.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new Fg(this.currentUser,e,t,n),i=Lg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Lg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=Mg(this.persistenceKey,e),i=new Ug(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return Vg.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Fg.Fs(new Dh(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Ug.Fs(r,t)}},{key:"Zs",value:function(e){return jg.Fs(e)}},{key:"fi",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Mh("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Ev();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),zg=function(){function e(){s(this,e),this.pi=new qg,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return l(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new qg,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Wg=function(){function e(){s(this,e)}return l(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Kg=function(){function e(){var t=this;s(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return l(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Mh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=E(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Mh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=E(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Hg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gg=function(){function e(t){s(this,e),this.Vi=t.Vi,this.Si=t.Si}return l(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),Qg=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return l(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Nh;o.listenOnce(Eh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ih.NO_ERROR:var t=o.getResponseJson();Mh("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ih.TIMEOUT:Mh("Connection",'RPC "'+e+'" timed out'),a(new Wh(zh.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:var n=o.getStatus();if(Mh("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(zh).indexOf(t)>=0?t:zh.UNKNOWN}(r.status);a(new Wh(u,r.message))}else a(new Wh(zh.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Wh(zh.UNAVAILABLE,"Connection failed."));break;default:jh()}}finally{Mh("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=_h(),a=xh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ch({})),this.qi(o.initMessageHeaders,t,n),V()||B()||U().indexOf("Electron/")>=0||z()||U().indexOf("MSAppHost/")>=0||q()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Mh("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Gg({Vi:function(e){l?Mh("Connection","Not sending because WebChannel is closed:",e):(c||(Mh("Connection","Opening WebChannel transport."),s.open(),c=!0),Mh("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ah.EventType.OPEN,(function(){l||Mh("Connection","WebChannel transport opened.")})),h(s,Ah.EventType.CLOSE,(function(){l||(l=!0,Mh("Connection","WebChannel transport closed"),f.Fi())})),h(s,Ah.EventType.ERROR,(function(e){l||(l=!0,Uh("Connection","WebChannel transport errored:",e),f.Fi(new Wh(zh.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ah.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];qh(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Mh("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=iv[e];if(void 0!==t)return lv(t)}(a),u=i.message;void 0===o&&(o=zh.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new Wh(o,u)),s.close()}else Mh("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,Th.STAT_EVENT,(function(e){e.stat===Sh.PROXY?Mh("Connection","Detected buffering proxy"):e.stat===Sh.NOPROXY&&Mh("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){s(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return l(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Mh("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Mh("RestConnection","Received: ",e),e}),(function(t){throw Uh("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ph,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=Hg[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function Yg(){return"undefined"!=typeof window?window:null}function Jg(){return"undefined"!=typeof document?document:null}function Xg(e){return new Fv(e,!0)}var $g=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;s(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return l(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Mh("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),Zg=function(){function e(t,n,r,i,a,o,u,c){s(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new $g(t,n)}return l(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===zh.RESOURCE_EXHAUSTED?(Fh(n.toString()),Fh("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===zh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=C(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Wh(zh.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Mh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(Mh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ek=function(e){h(n,e);var t=g(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,c}return l(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(qh(void 0===t||"string"==typeof t),yd.fromBase64String(t||"")):(qh(void 0===t||t instanceof Uint8Array),yd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?zh.UNKNOWN:lv(e.code);return new Wh(t,e.message||"")}(o);n=new Nv(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Kv(e,s.document.name),l=qv(s.document.updateTime),f=new Bd({mapValue:{fields:s.document.fields}}),h=Wd.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Cv(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Kv(e,v.document),m=v.readTime?qv(v.readTime):ud.min(),g=Wd.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Cv([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Kv(e,w.document),_=w.removedTargetIds||[];n=new Cv([],_,b,null)}else{if(!("filter"in t))return jh();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new sv(I),T=x.targetId;n=new Av(T,E)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return ud.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ud.min():t.readTime?qv(t.readTime):ud.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=Qv(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=Yd(r)?{documents:ty(e,r)}:{query:ny(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Vv(e,t.resumeToken):t.snapshotVersion.compareTo(ud.min())>0&&(n.readTime=Uv(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jh()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=Qv(this.k),t.removeTarget=e,this.gr(t)}}]),n}(Zg),tk=function(e){h(n,e);var t=g(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,c.Vr=!1,c}return l(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,at(d(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(qh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(qh(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qv(e.updateTime):qv(t);return n.isEqual(ud.min())&&(n=qv(t)),new Wp(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qv(e.commitTime);return this.listener.Cr(n,t)}return qh(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=Qv(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Zv(t.k,e)}))};this.gr(n)}}]),n}(Zg),nk=function(e){h(n,e);var t=g(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return l(n,[{key:"Fr",value:function(){if(this.$r)throw new Wh(zh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=C(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Wh(zh.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=C(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Wh(zh.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return function e(){s(this,e)}}()),rk=function(){function e(t,n){s(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return l(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(Fh(t),this.Lr=!1):Mh("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),ik=function e(t,n,r,i,a){var o=this;s(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=vk(o),!e.t0){e.next=5;break}return Mh("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Bh(t)).Gr.add(4),e.next=4,uk(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,ak(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new rk(r,i)};function ak(e){return ok.apply(this,arguments)}function ok(){return ok=oe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vk(t)){e.next=18;break}n=E(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ok.apply(this,arguments)}function uk(e){return sk.apply(this,arguments)}function sk(){return sk=oe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),sk.apply(this,arguments)}function ck(e,t){var n=Bh(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),pk(n)?dk(n):Bk(n).lr()&&fk(n,t))}function lk(e,t){var n=Bh(e),r=Bk(n);n.Wr.delete(t),r.lr()&&hk(n,t),0===n.Wr.size&&(r.lr()?r._r():vk(n)&&n.Jr.set("Unknown"))}function fk(e,t){e.Yr.X(t.targetId),Bk(e).br(t)}function hk(e,t){e.Yr.X(t),Bk(e).vr(t)}function dk(e){e.Yr=new Dv({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),Bk(e).start(),e.Jr.Br()}function pk(e){return vk(e)&&!Bk(e).hr()&&e.Wr.size>0}function vk(e){return 0===Bh(e).Gr.size}function yk(e){e.Yr=void 0}function mk(e){return gk.apply(this,arguments)}function gk(){return gk=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){fk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function kk(e,t){return wk.apply(this,arguments)}function wk(){return wk=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yk(t),pk(t)?(t.Jr.Kr(n),dk(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),wk.apply(this,arguments)}function bk(e,t,n){return _k.apply(this,arguments)}function _k(){return _k=oe(se().mark((function e(t,n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Nv&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=E(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Mh("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,xk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Cv?t.Yr.ot(n):n instanceof Av?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(ud.min())){e.next=29;break}return e.prev=14,e.next=17,sg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(yd.EMPTY_BYTE_STRING,n.snapshotVersion)),hk(e,t);var r=new $y(n.target,t,1,n.sequenceNumber);fk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Mh("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,xk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),_k.apply(this,arguments)}function xk(e,t,n){return Ik.apply(this,arguments)}function Ik(){return Ik=oe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zy(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,uk(t);case 5:t.Jr.set("Offline"),r||(r=function(){return sg(t.localStore)}),t.asyncQueue.enqueueRetryable(oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mh("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,ak(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Ik.apply(this,arguments)}function Ek(e,t){return t().catch((function(n){return xk(e,n,t)}))}function Tk(e){return Sk.apply(this,arguments)}function Sk(){return Sk=oe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bh(t),r=zk(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Ck(n)){e.next=19;break}return e.prev=3,e.next=6,fg(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,Ak(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,xk(n,e.t0);case 17:e.next=2;break;case 19:Nk(n)&&Rk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Sk.apply(this,arguments)}function Ck(e){return vk(e)&&e.Qr.length<10}function Ak(e,t){e.Qr.push(t);var n=zk(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Nk(e){return vk(e)&&!zk(e).hr()&&e.Qr.length>0}function Rk(e){zk(e).start()}function Dk(e){return Pk.apply(this,arguments)}function Pk(){return Pk=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zk(t).kr();case 1:case"end":return e.stop()}}),e)}))),Pk.apply(this,arguments)}function Ok(e){return Lk.apply(this,arguments)}function Lk(){return Lk=oe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=zk(t),r=E(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}function Mk(e,t,n){return Fk.apply(this,arguments)}function Fk(){return Fk=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=Xy.from(i,n,r),e.next=3,Ek(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Tk(t);case 5:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function Uk(e,t){return Vk.apply(this,arguments)}function Vk(){return Vk=oe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&zk(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cv(i=n.code)||i===zh.ABORTED){e.next=7;break}return r=t.Qr.shift(),zk(t).wr(),e.next=5,Ek(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Tk(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Nk(t)&&Rk(t);case 5:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function jk(e,t){return qk.apply(this,arguments)}function qk(){return qk=oe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bh(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,ak(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,uk(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),qk.apply(this,arguments)}function Bk(e){return e.Xr||(e.Xr=function(e,t,n){var r=Bh(e);return r.Fr(),new ek(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:mk.bind(null,e),Ni:kk.bind(null,e),Pr:bk.bind(null,e)}),e.zr.push(function(){var t=oe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),pk(e)?dk(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:yk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function zk(e){return e.Zr||(e.Zr=function(e,t,n){var r=Bh(e);return r.Fr(),new tk(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Dk.bind(null,e),Ni:Uk.bind(null,e),Nr:Ok.bind(null,e),Cr:Mk.bind(null,e)}),e.zr.push(function(){var t=oe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,Tk(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Mh("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var Wk=function(){function e(t,n,r,i,a){s(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Kh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return l(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wh(zh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Kk(e,t){if(Fh("AsyncQueue","".concat(t,": ").concat(e)),zy(e))return new Wh(zh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Hk=function(){function e(t){s(this,e),this.comparator=t?function(e,n){return t(e,n)||Sd.comparator(e.key,n.key)}:function(e,t){return Sd.comparator(e.key,t.key)},this.keyedMap=kv(),this.sortedSet=new fv(this.comparator)}return l(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Gk=function(){function e(){s(this,e),this.eo=new fv(Sd.comparator)}return l(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):jh():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Qk=function(){function e(t,n,r,i,a,o,u,c){s(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c}return l(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Hk.emptySet(n),a,r,i,!0,!1)}}]),e}(),Yk=function e(){s(this,e),this.so=void 0,this.listeners=[]},Jk=function e(){s(this,e),this.queries=new Vm((function(e){return xp(e)}),_p),this.onlineState="Unknown",this.io=new Set};function Xk(e,t){return $k.apply(this,arguments)}function $k(){return $k=oe(se().mark((function e(t,n){var r,i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bh(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Yk),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Kk(e.t0,"Initialization of query '".concat(Ip(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&rw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),$k.apply(this,arguments)}function Zk(e,t){return ew.apply(this,arguments)}function ew(){return ew=oe(se().mark((function e(t,n){var r,i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bh(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}function tw(e,t){var n,r=Bh(e),i=!1,a=E(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=E(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&rw(r)}function nw(e,t,n){var r=Bh(e),i=r.queries.get(t);if(i){var a,o=E(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function rw(e){e.io.forEach((function(e){e.next()}))}var iw=function(){function e(t,n,r){s(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return l(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=E(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Qk(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=Qk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),aw=function(){function e(t,n){s(this,e),this.payload=t,this.byteLength=n}return l(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),ow=function(){function e(t){s(this,e),this.k=t}return l(e,[{key:"Hn",value:function(e){return Kv(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?Xv(this.k,e.document,!1):Wd.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return qv(e)}}]),e}(),uw=function(){function e(t,n,r){s(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=sw(t)}return l(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new ow(this.k),i=E(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=E(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||xv()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=oe(se().mark((function e(){var t,n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg(this.localStore,new ow(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=E(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,_g(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Zm(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function sw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var cw=function e(t){s(this,e),this.key=t},lw=function e(t){s(this,e),this.key=t},fw=function(){function e(t,n){s(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=xv(),this.mutatedKeys=xv(),this.Ao=Tp(t),this.Ro=new Hk(this.Ao)}return l(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new Gk,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=pp(this.query)&&i.size===this.query.limit?i.last():null,c=vp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ep(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),pp(this.query)||vp(this.query))for(;o.size>this.query.limit;){var l=pp(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jh()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new Qk(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Gk,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=xv(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new lw(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new cw(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=xv();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return Qk.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),hw=function e(t,n,r){s(this,e),this.query=t,this.targetId=n,this.view=r},dw=function e(t){s(this,e),this.key=t,this.$o=!1},pw=function(){function e(t,n,r,i,a,o){s(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new Vm((function(e){return xp(e)}),_p),this.Mo=new Map,this.Lo=new Set,this.Bo=new fv(Sd.comparator),this.Uo=new Map,this.qo=new Eg,this.Ko={},this.jo=new Map,this.Qo=Tm.re(),this.onlineState="Unknown",this.Wo=void 0}return l(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function vw(e,t){return yw.apply(this,arguments)}function yw(){return yw=oe(se().mark((function e(t,n){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=sb(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,hg(r.localStore,wp(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,mw(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&ck(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function mw(e,t,n,r){return gw.apply(this,arguments)}function gw(){return gw=oe(se().mark((function e(t,n,r,i){var a,o,u,s,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=oe(se().mark((function e(t,n,r,i){var a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,vg(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Uw(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,vg(t.localStore,n,!0);case 3:return a=e.sent,o=new fw(n,a.zn),u=o.bo(a.documents),s=Sv.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Uw(t,r,c.Co),l=new hw(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bh(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!_p(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,dg(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),lk(r.remoteStore,i.targetId),Mw(r,i.targetId)})).catch(Rm);case 9:e.next=14;break;case 11:return Mw(r,i.targetId),e.next=14,dg(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function bw(e,t,n){return _w.apply(this,arguments)}function _w(){return _w=oe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cb(t),e.prev=1,e.next=4,function(e,t){var n,r=Bh(e),i=od.now(),a=t.reduce((function(e,t){return e.add(t.key)}),xv());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=E(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Jp(c,n.get(c.key));null!=l&&u.push(new ev(c.key,l,zd(l.value.mapValue),Kp.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new fv(rd)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,qw(i,a.changes);case 9:return e.next=11,Tk(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Kk(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),_w.apply(this,arguments)}function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),e.prev=1,e.next=4,cg(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(qh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?qh(n.$o):e.removedDocuments.size>0&&(qh(n.$o),n.$o=!1))})),e.next=8,qw(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Rm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Iw.apply(this,arguments)}function Ew(e,t,n){var r=Bh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Bh(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=E(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&rw(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Tw(e,t,n){return Sw.apply(this,arguments)}function Sw(){return Sw=oe(se().mark((function e(t,n,r){var i,a,o,u,s,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Bh(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new fv(Sd.comparator)).insert(o,Wd.newNoDocument(o,ud.min())),s=xv().add(o),c=new Tv(ud.min(),new Map,new pv(rd),u,s),e.next=9,xw(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),jw(i),e.next=16;break;case 14:return e.next=16,dg(i.localStore,n,!1).then((function(){return Mw(i,n,r)})).catch(Rm);case 16:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Cw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),i=n.batch.batchId,e.prev=1,e.next=4,ug(r.localStore,n);case 4:return a=e.sent,Lw(r,i,null),Ow(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,qw(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Aw.apply(this,arguments)}function Nw(e,t,n){return Rw.apply(this,arguments)}function Rw(){return Rw=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bh(t),e.prev=1,e.next=4,function(e,t){var n=Bh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return qh(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Lw(i,n,r),Ow(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,qw(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Rw.apply(this,arguments)}function Dw(e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=oe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vk((r=Bh(t)).remoteStore)||Mh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Bh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Kk(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Pw.apply(this,arguments)}function Ow(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function Lw(e,t,n){var r=Bh(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Mw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=E(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||Fw(e,t)}))}function Fw(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(lk(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),jw(e))}function Uw(e,t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof cw?(e.qo.addReference(a.key,t),Vw(e,a)):a instanceof lw?(Mh("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||Fw(e,a.key)):jh()}}catch(o){i.e(o)}finally{i.f()}}function Vw(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Mh("SyncEngine","New document in limbo: "+n),e.Lo.add(r),jw(e))}function jw(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Sd(hd.fromString(t)),r=e.Qo.next();e.Uo.set(r,new dw(n)),e.Bo=e.Bo.insert(n,r),ck(e.remoteStore,new $y(wp(dp(n.path)),r,2,ed.I))}}function qw(e,t,n){return Bw.apply(this,arguments)}function Bw(){return Bw=oe(se().mark((function e(t,n,r){var i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Bh(t),a=[],o=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=tg.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=oe(se().mark((function e(t,n){var r,i,a,o,u,s,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Uy.forEach(n,(function(t){return Uy.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Uy.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),zy(e.t0)){e.next=10;break}throw e.t0;case 10:Mh("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=E(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function zw(e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Bh(t)).currentUser.isEqual(n)){e.next=11;break}return Mh("SyncEngine","User change. New user:",n.toKey()),e.next=5,ag(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Wh(zh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,qw(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Kw(e,t){var n=Bh(e),r=n.Uo.get(t);if(r&&r.$o)return xv().add(r.key);var i=xv(),a=n.Mo.get(t);if(!a)return i;var o,u=E(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Oo.get(s);i=i.unionWith(c.view.Po)}}catch(l){u.e(l)}finally{u.f()}return i}function Hw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),e.next=3,vg(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&Uw(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Qw(e){return Yw.apply(this,arguments)}function Yw(){return Yw=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bh(t),e.abrupt("return",mg(n.localStore).then((function(e){return qw(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Jw(e,t,n,r){return Xw.apply(this,arguments)}function Xw(){return Xw=oe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bh(t),e.next=3,function(e,t){var n=Bh(e),r=Bh(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):Uy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Tk(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Lw(a,n,i||null),Ow(a,n),function(e,t){Bh(Bh(e).An).ee(t)}(a.localStore,n)):jh();case 11:return e.next=13,qw(a,o);case 13:e.next=16;break;case 15:Mh("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function $w(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=oe(se().mark((function e(t,n){var r,i,a,o,u,s,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sb(r=Bh(t)),cb(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,eb(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,jk(r.remoteStore,!0);case 9:o=E(a);try{for(o.s();!(u=o.n()).done;)s=u.value,ck(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Mw(r,t),dg(r.localStore,t,!0)})),lk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,eb(r,c);case 21:return function(e){var t=Bh(e);t.Uo.forEach((function(e,n){lk(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new fv(Sd.comparator)}(r),r.Wo=!1,e.next=25,jk(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eb(e,t,n){return tb.apply(this,arguments)}function tb(){return tb=oe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Bh(t),a=[],o=[],u=E(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,hg(i.localStore,wp(f[0]));case 11:l=e.sent,h=E(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,Hw(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,yg(i.localStore,c);case 36:return m=e.sent,e.next=39,hg(i.localStore,m);case 39:return l=e.sent,e.next=42,mw(i,nb(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),tb.apply(this,arguments)}function nb(e){return hp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function rb(e){var t=Bh(e);return Bh(Bh(t.localStore).persistence).Tn()}function ib(e,t,n,r){return ab.apply(this,arguments)}function ab(){return ab=oe(se().mark((function e(t,n,r,i){var a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Bh(t)).Wo){e.next=5;break}Mh("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,mg(a.localStore);case 11:return o=e.sent,u=Tv.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,qw(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,dg(a.localStore,n,!0);case 18:return Mw(a,n,i),e.abrupt("break",21);case 20:jh();case 21:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t,n){return ub.apply(this,arguments)}function ub(){return ub=oe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=sb(t)).Wo){e.next=45;break}a=E(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Mo.has(u)){e.next=10;break}return Mh("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,yg(i.localStore,u);case 12:return s=e.sent,e.next=15,hg(i.localStore,s);case 15:return c=e.sent,e.next=18,mw(i,nb(s),c.targetId,!1);case 18:ck(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=E(r),e.prev=30,h=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,dg(i.localStore,t,!1).then((function(){lk(i.remoteStore,t),Mw(i,t)})).catch(Rm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),ub.apply(this,arguments)}function sb(e){var t=Bh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tw.bind(null,t),t.Fo.Pr=tw.bind(null,t.eventManager),t.Fo.zo=nw.bind(null,t.eventManager),t}function cb(e){var t=Bh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nw.bind(null,t),t}function lb(e,t,n){var r=Bh(e);(function(){var e=oe(se().mark((function e(t,n,r){var i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Bh(e),r=qv(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(sw(i)),a=new uw(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,qw(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=Bh(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Uh("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var fb=function(){function e(){s(this,e),this.synchronizeTabs=!1}return l(e,[{key:"initialize",value:function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=Xg(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return ig(this.persistence,new ng,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new Rg(Pg.ks,this.k)}},{key:"Jo",value:function(e){return new zg}},{key:"terminate",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hb=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return l(n,[{key:"initialize",value:function(){var e=oe(se().mark((function e(t){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(d(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,gg(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,cb(this.ta.syncEngine);case 8:return e.next=10,Tk(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return ig(this.persistence,new ng,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Lm(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gm.withCacheSize(this.cacheSizeBytes):gm.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Yg(),Jg(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new zg}}]),n}(fb),db=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return l(n,[{key:"initialize",value:function(){var e=oe(se().mark((function e(t){var r,i=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(d(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof Bg,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:Jw.bind(null,r),gi:ib.bind(null,r),yi:ob.bind(null,r),Tn:rb.bind(null,r),_i:Qw.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$w(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=Yg();if(!Bg.bt(t))throw new Wh(zh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(hb),pb=function(){function e(){s(this,e)}return l(e,[{key:"initialize",value:function(){var e=oe(se().mark((function e(t,n){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ew(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zw.bind(null,this.syncEngine),e.next=12,jk(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Jk}},{key:"createDatastore",value:function(e){var t,n=Xg(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Qg(t));return function(e,t,n,r){return new nk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ew(o.syncEngine,e,0)},a=Kg.bt()?new Kg:new Wg,new ik(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new pw(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bh(t),Mh("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,uk(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function vb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return oe(se().mark((function r(){var i;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var yb=function(){function e(t){s(this,e),this.observer=t,this.muted=!1}return l(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),mb=function(){function e(t,n){var r=this;s(this,e),this.sa=t,this.k=n,this.metadata=new Kh,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return l(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=oe(se().mark((function e(){var t,n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new aw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=oe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=oe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gb=function(){function e(t){s(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return l(e,[{key:"lookup",value:function(){var e=oe(se().mark((function e(t){var n,r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Wh(zh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=oe(se().mark((function e(t,n){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),i=Qv(r.k)+"/documents",a={documents:n.map((function(e){return Wv(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=$v(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());qh(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ov(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=oe(se().mark((function e(){var t,n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Sd.fromPath(t);n.mutations.push(new uv(r,n.precondition(r)))})),e.next=7,function(){var e=oe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bh(t),i=Qv(r.k)+"/documents",a={writes:n.map((function(e){return Zv(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jh();t=ud.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wh(zh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kp.updateTime(t):Kp.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ud.min()))throw new Wh(zh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kp.updateTime(t)}return Kp.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),kb=function(){function e(t,n,r,i){s(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new $g(this.asyncQueue,"transaction_retry")}return l(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(oe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new gb(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!Id(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!cv(t)}return!1}}]),e}(),wb=function(){function e(t,n,r,i){var a=this;s(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dh.UNAUTHENTICATED,this.clientId=nd.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mh("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return l(e,[{key:"getConfiguration",value:function(){var e=oe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Wh(zh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Kh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(oe(se().mark((function n(){var r;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Kk(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function bb(e,t){return _b.apply(this,arguments)}function _b(){return _b=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Mh("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ag(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function xb(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Eb(t);case 3:return r=e.sent,Mh("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=oe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Bh(t)).asyncQueue.verifyOperationInProgress(),Mh("RemoteStore","RemoteStore received new credentials"),i=vk(r),r.Gr.add(3),e.next=6,uk(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,ak(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Eb(e){return Tb.apply(this,arguments)}function Tb(){return Tb=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Mh("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,bb(t,new fb);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Sb(e){return Cb.apply(this,arguments)}function Cb(){return Cb=oe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Mh("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,xb(t,new pb);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Ab(e){return Eb(e).then((function(e){return e.persistence}))}function Nb(e){return Eb(e).then((function(e){return e.localStore}))}function Rb(e){return Sb(e).then((function(e){return e.remoteStore}))}function Db(e){return Sb(e).then((function(e){return e.syncEngine}))}function Pb(e){return Ob.apply(this,arguments)}function Ob(){return Ob=oe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sb(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=vw.bind(null,n.syncEngine),r.onUnlisten=kw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Lb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yb({next:function(a){t.enqueueAndForget((function(){return Zk(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Wh(zh.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Wh(zh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new iw(dp(n.path),a,{includeMetadataChanges:!0,wo:!0});return Xk(e,o)},i.next=3,Pb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Mb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yb({next:function(n){t.enqueueAndForget((function(){return Zk(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Wh(zh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new iw(n,a,{includeMetadataChanges:!0,wo:!0});return Xk(e,o)},i.next=3,Pb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Fb=function e(t,n,r,i,a,o,u,c){s(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=c},Ub=function(){function e(t,n){s(this,e),this.projectId=t,this.database=n||"(default)"}return l(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),Vb=new Map;function jb(e,t,n){if(!n)throw new Wh(zh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function qb(e,t,n,r){if(!0===t&&!0===r)throw new Wh(zh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Bb(e){if(!Sd.isDocumentKey(e))throw new Wh(zh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zb(e){if(Sd.isDocumentKey(e))throw new Wh(zh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":jh()}function Kb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wh(zh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Wb(e);throw new Wh(zh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Hb(e,t){if(t<=0)throw new Wh(zh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Gb=function(){function e(t){var n;if(s(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Wh(zh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wh(zh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return l(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Qb=function(){function e(t,n,r){s(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gb({}),this._settingsFrozen=!1,t instanceof Ub?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wh(zh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ub(e.options.projectId)}(t))}return l(e,[{key:"app",get:function(){if(!this._app)throw new Wh(zh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Wh(zh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gh;switch(e.type){case"gapi":var t=e.client;return qh(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Xh(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Wh(zh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Vb.get(e);t&&(Mh("ComponentProvider","Removing Datastore"),Vb.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Yb(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Kb(e,Qb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Uh("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Dh.MOCK_USER;else{o=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Wh(zh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Dh(s)}e._authCredentials=new Qh(new Hh(o,u))}}var Jb=function(){function e(t,n,r){s(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return l(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new $b(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Xb=function(){function e(t,n,r){s(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return l(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),$b=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,dp(i)))._path=i,a.type="collection",a}return l(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Jb(this.firestore,null,new Sd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Xb);function Zb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ie(e),jb("collection","path",t),e instanceof Qb){var a=hd.fromString.apply(hd,[t].concat(r));return zb(a),new $b(e,null,a)}if(!(e instanceof Jb||e instanceof $b))throw new Wh(zh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hd.fromString.apply(hd,[t].concat(r)));return zb(o),new $b(e.firestore,null,o)}function e_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ie(e),1===arguments.length&&(t=nd.A()),jb("doc","path",t),e instanceof Qb){var a=hd.fromString.apply(hd,[t].concat(r));return Bb(a),new Jb(e,null,new Sd(a))}if(!(e instanceof Jb||e instanceof $b))throw new Wh(zh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hd.fromString.apply(hd,[t].concat(r)));return Bb(o),new Jb(e.firestore,e instanceof $b?e.converter:null,new Sd(o))}function t_(e,t){return e=ie(e),t=ie(t),(e instanceof Jb||e instanceof $b)&&(t instanceof Jb||t instanceof $b)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function n_(e,t){return e=ie(e),t=ie(t),e instanceof Xb&&t instanceof Xb&&e.firestore===t.firestore&&_p(e._query,t._query)&&e.converter===t.converter}var r_=function(){function e(){var t=this;s(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new $g(this,"async_queue_retry"),this.Ra=function(){var e=Jg();e&&Mh("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=Jg();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return l(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=Jg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new Kh;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=oe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),zy(e.t0)){e.next=12;break}throw e.t0;case 12:Mh("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Fh("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=Wk.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&jh()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=oe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=E(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=E(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function i_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=E(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var a_=function(){function e(){s(this,e),this._progressObserver={},this._taskCompletionResolver=new Kh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return l(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),o_=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new r_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return l(n,[{key:"_terminate",value:function(){return this._firestoreClient||s_(this),this._firestoreClient.terminate()}}]),n}(Qb);function u_(e){return e._firestoreClient||s_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function s_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Fb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new wb(e._authCredentials,e._appCheckCredentials,e._queue,r)}function c_(e,t,n){var r=new Kh;return e.asyncQueue.enqueue(oe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,bb(e,n);case 3:return i.next=5,xb(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===zh.FAILED_PRECONDITION||e.code===zh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function l_(e){return function(e){return e.asyncQueue.enqueue(oe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ab(e);case 2:return n=t.sent,t.next=5,Rb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Bh(e);return t.Gr.delete(0),ak(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(u_(e=Kb(e,o_)))}function f_(e){return function(e){return e.asyncQueue.enqueue(oe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ab(e);case 2:return n=t.sent,t.next=5,Rb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Bh(t)).Gr.add(0),e.next=4,uk(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(u_(e=Kb(e,o_)))}function h_(e,t){var n=u_(e=Kb(e,o_)),r=new a_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new mb(e,t)}(function(e,t){if(e instanceof Uint8Array)return vb(e,t);if(e instanceof ArrayBuffer)return vb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Xg(t));e.asyncQueue.enqueueAndForget(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lb,t.next=3,Db(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function d_(e,t){return function(e,t){return e.asyncQueue.enqueue(oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Bh(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,Nb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(u_(e=Kb(e,o_)),t).then((function(t){return t?new Xb(e,null,t.query):null}))}function p_(e){if(e._initialized||e._terminated)throw new Wh(zh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var v_=function(){function e(){s(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Wh(zh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pd(n)}return l(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var y_=function(){function e(t){s(this,e),this._byteString=t}return l(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(yd.fromBase64String(t))}catch(t){throw new Wh(zh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(yd.fromUint8Array(t))}}]),e}(),m_=function e(t){s(this,e),this._methodName=t},g_=function(){function e(t,n){if(s(this,e),!isFinite(t)||t<-90||t>90)throw new Wh(zh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wh(zh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return l(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return rd(this._lat,e._lat)||rd(this._long,e._long)}}]),e}(),k_=/^__.*__$/,w_=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return l(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ev(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zp(e,this.data,t,this.fieldTransforms)}}]),e}(),b_=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return l(e,[{key:"toMutation",value:function(e,t){return new ev(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function __(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jh()}}var x_=function(){function e(t,n,r,i,a,o){s(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return l(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return z_(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(__(this.xa)&&k_.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),I_=function(){function e(t,n,r){s(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||Xg(t)}return l(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new x_({xa:e,methodName:t,Ka:n,path:pd.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function E_(e){var t=e._freezeSettings(),n=Xg(e._databaseId);return new I_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function T_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);V_("Data must be an object, but it was:",o,r);var u,s,c=F_(r,o);if(a.merge)u=new vd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=E(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=j_(t,d,n);if(!o.contains(p))throw new Wh(zh.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));W_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new vd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new w_(new Bd(c),u,s)}var S_=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(m_);function C_(e,t,n){return new x_({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var A_=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"_toFieldTransform",value:function(e){return new zp(e.path,new Lp)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(m_),N_=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).Qa=r,i}return l(n,[{key:"_toFieldTransform",value:function(e){var t=C_(this,e,!0),n=this.Qa.map((function(e){return M_(e,t)})),r=new Mp(n);return new zp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(m_),R_=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).Qa=r,i}return l(n,[{key:"_toFieldTransform",value:function(e){var t=C_(this,e,!0),n=this.Qa.map((function(e){return M_(e,t)})),r=new Up(n);return new zp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(m_),D_=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).Wa=r,i}return l(n,[{key:"_toFieldTransform",value:function(e){var t=new jp(e.k,Np(e.k,this.Wa));return new zp(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(m_);function P_(e,t,n,r){var i=e.ja(1,t,n);V_("Data must be an object, but it was:",i,r);var a=[],o=Bd.empty();cd(r,(function(e,r){var u=B_(t,e,n);r=ie(r);var s=i.La(u);if(r instanceof S_)a.push(u);else{var c=M_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new vd(a);return new b_(o,u,i.fieldTransforms)}function O_(e,t,n,r,i,a){var o=e.ja(1,t,n),u=[j_(t,r,n)],s=[i];if(a.length%2!=0)throw new Wh(zh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(j_(t,a[c])),s.push(a[c+1]);for(var l=[],f=Bd.empty(),h=u.length-1;h>=0;--h)if(!W_(l,u[h])){var d=u[h],p=s[h];p=ie(p);var v=o.La(d);if(p instanceof S_)l.push(d);else{var y=M_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new vd(l);return new b_(f,m,o.fieldTransforms)}function L_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return M_(n,e.ja(r?4:3,t))}function M_(e,t){if(U_(e=ie(e)))return V_("Unsupported field value:",t,e),F_(e,t);if(e instanceof m_)return function(e,t){if(!__(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=E(e);try{for(a.s();!(n=a.n()).done;){var o=M_(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ie(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Np(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=od.fromDate(e);return{timestampValue:Uv(t.k,n)}}if(e instanceof od){var r=new od(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Uv(t.k,r)}}if(e instanceof g_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof y_)return{bytesValue:Vv(t.k,e._byteString)};if(e instanceof Jb){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Bv(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(Wb(e)))}(e,t)}function F_(e,t){var n={};return ld(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cd(e,(function(e,r){var i=M_(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function U_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof od||e instanceof g_||e instanceof y_||e instanceof Jb||e instanceof m_)}function V_(e,t,n){if(!U_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Wb(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function j_(e,t,n){if((t=ie(t))instanceof v_)return t._internalPath;if("string"==typeof t)return B_(e,t);throw z_("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var q_=new RegExp("[~\\*/\\[\\]]");function B_(e,t,n){if(t.search(q_)>=0)throw z_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return A(v_,u(t.split(".")))._internalPath}catch(r){throw z_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function z_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Wh(zh.INVALID_ARGUMENT,u+e+s)}function W_(e,t){return e.some((function(e){return e.isEqual(t)}))}var K_=function(){function e(t,n,r,i,a){s(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return l(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Jb(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new H_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),H_=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"data",value:function(){return at(d(n.prototype),"data",this).call(this)}}]),n}(K_);function G_(e,t){return"string"==typeof t?B_(e,t):t instanceof v_?t._internalPath:t._delegate._internalPath}var Q_=function(){function e(t,n){s(this,e),this.hasPendingWrites=t,this.fromCache=n}return l(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Y_=function(e){h(n,e);var t=g(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,r,i,a,u))._firestore=e,c._firestoreImpl=e,c.metadata=o,c}return l(n,[{key:"exists",value:function(){return at(d(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new J_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(K_),J_=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return at(d(n.prototype),"data",this).call(this,e)}}]),n}(Y_),X_=function(){function e(t,n,r,i){s(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Q_(i.hasPendingWrites,i.fromCache),this.query=r}return l(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new J_(n._firestore,n._userDataWriter,r.key,r,new Q_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wh(zh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new J_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Q_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new J_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Q_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:$_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function $_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jh()}}function Z_(e,t){return e instanceof Y_&&t instanceof Y_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof X_&&t instanceof X_&&e._firestore===t._firestore&&n_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function ex(e){if(vp(e)&&0===e.explicitOrderBy.length)throw new Wh(zh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tx=function e(){s(this,e)};function nx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var rx=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return l(n,[{key:"_apply",value:function(e){var t=E_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Wh(zh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){px(o,a);var s,c=[],l=E(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(dx(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=dx(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||px(o,a),u=L_(n,"where",o,"in"===a||"not-in"===a);var h=Jd.create(i,a,u);return function(e,t){if(t.V()){var n=mp(e);if(null!==n&&!n.isEqual(t.field))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=yp(e);null!==r&&vx(e,t.field,r)}var i=function(e,t){var n,r=E(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Wh(zh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wh(zh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Xb(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new fp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(tx);var ix=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return l(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new up(t,n);return function(e,t){if(null===yp(e)){var n=mp(e);null!==n&&vx(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new Xb(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new fp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(tx);var ax=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return l(n,[{key:"_apply",value:function(e){return new Xb(e.firestore,e.converter,bp(e._query,this.Ya,this.Xa))}}]),n}(tx);var ox=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return l(n,[{key:"_apply",value:function(e){var t=hx(e,this.type,this.Za,this.tc);return new Xb(e.firestore,e.converter,function(e,t){return new fp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(tx);function ux(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ox("startAt",t,!0)}function sx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ox("startAfter",t,!1)}var cx=function(e){h(n,e);var t=g(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return l(n,[{key:"_apply",value:function(e){var t=hx(e,this.type,this.Za,this.tc);return new Xb(e.firestore,e.converter,function(e,t){return new fp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(tx);function lx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cx("endBefore",t,!0)}function fx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cx("endAt",t,!1)}function hx(e,t,n,r){if(n[0]=ie(n[0]),n[0]instanceof K_)return function(e,t,n,r,i){if(!r)throw new Wh(zh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=E(kp(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ld(t,r.key));else{var c=r.data.field(s.field);if(bd(c))throw new Wh(zh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ap(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=E_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Wh(zh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!gp(e)&&-1!==c.indexOf("/"))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(hd.fromString(c));if(!Sd.isDocumentKey(l))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Sd(l);u.push(Ld(t,f))}else{var h=L_(n,r,c);u.push(h)}}return new ap(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function dx(e,t,n){if("string"==typeof(n=ie(n))){if(""===n)throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gp(t)&&-1!==n.indexOf("/"))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(hd.fromString(n));if(!Sd.isDocumentKey(r))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ld(e,new Sd(r))}if(n instanceof Jb)return Ld(e,n._key);throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Wb(n),"."))}function px(e,t){if(!Array.isArray(e)||0===e.length)throw new Wh(zh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Wh(zh.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function vx(e,t,n){if(!n.isEqual(t))throw new Wh(zh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var yx=function(){function e(){s(this,e)}return l(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jh()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return cd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new g_(kd(e.latitude),kd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=_d(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=gd(e);return new od(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=hd.fromString(e);qh(py(n));var r=new Ub(n.get(1),n.get(3)),i=new Sd(n.popFirst(5));return r.isEqual(t)||Fh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mx(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var gx=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return l(n,[{key:"convertBytes",value:function(e){return new y_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jb(this.firestore,null,t)}}]),n}(yx),kx=function(){function e(t,n){s(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=E_(t)}return l(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=wx(e,this._firestore),i=mx(r.converter,t,n),a=T_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Kp.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=wx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ie(t))||t instanceof v_?O_(this._dataReader,"WriteBatch.update",i._key,t,n,o):P_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Kp.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=wx(e,this._firestore);return this._mutations=this._mutations.concat(new ov(t._key,Kp.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Wh(zh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function wx(e,t){if((e=ie(e)).firestore!==t)throw new Wh(zh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var bx=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return l(n,[{key:"convertBytes",value:function(e){return new y_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jb(this.firestore,null,t)}}]),n}(yx);function _x(e){e=Kb(e,Jb);var t=Kb(e.firestore,o_),n=u_(t),r=new bx(t);return function(e,t){var n=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=oe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Bh(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Wh(zh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Kk(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Nb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Y_(t,r,e._key,n,new Q_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function xx(e){e=Kb(e,Xb);var t=Kb(e.firestore,o_),n=u_(t),r=new bx(t);return function(e,t){var n=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=oe(se().mark((function e(t,n,r){var i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vg(t,n,!0);case 3:i=e.sent,a=new fw(n,i.zn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Kk(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Nb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new X_(t,r,e,n)}))}function Ix(e,t,n){e=Kb(e,Jb);var r=Kb(e.firestore,o_),i=mx(e.converter,t,n);return Cx(r,[T_(E_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kp.none())])}function Ex(e,t,n){e=Kb(e,Jb);for(var r=Kb(e.firestore,o_),i=E_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Cx(r,[("string"==typeof(t=ie(t))||t instanceof v_?O_(i,"updateDoc",e._key,t,n,o):P_(i,"updateDoc",e._key,t)).toMutation(e._key,Kp.exists(!0))])}function Tx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ie(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||i_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(i_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Jb)l=Kb(e.firestore,o_),f=dp(e._key.path),c={next:function(t){n[s]&&n[s](Ax(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Kb(e,Xb);l=Kb(p.firestore,o_),f=p._query;var v=new bx(l);c={next:function(e){n[s]&&n[s](new X_(l,v,p,e))},error:n[s+1],complete:n[s+2]},ex(e._query)}return function(e,t,n,r){var i=new yb(r),a=new iw(t,i,n);return e.asyncQueue.enqueueAndForget(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xk,t.next=3,Pb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Zk,t.next=3,Pb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(u_(l),f,h,c)}function Sx(e,t){return function(e,t){var n=new yb(t);return e.asyncQueue.enqueueAndForget(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Bh(e).io.add(t),t.next()},t.next=3,Pb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(oe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Bh(e).io.delete(t)},t.next=3,Pb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(u_(e=Kb(e,o_)),i_(t)?t:{next:t})}function Cx(e,t){return function(e,t){var n=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=bw,r.next=3,Db(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(u_(e),t)}function Ax(e,t,n){var r=n.docs.get(t._key),i=new bx(e);return new Y_(e,i,t._key,r,new Q_(n.hasPendingWrites,n.fromCache),t.converter)}var Nx=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r))._firestore=e,i}return l(n,[{key:"get",value:function(e){var t=this,r=wx(e,this._firestore),i=new bx(this._firestore);return at(d(n.prototype),"get",this).call(this,e).then((function(e){return new Y_(t._firestore,i,r._key,e._document,new Q_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){s(this,e),this._firestore=t,this._transaction=n,this._dataReader=E_(t)}return l(e,[{key:"get",value:function(e){var t=this,n=wx(e,this._firestore),r=new gx(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jh();var i=e[0];if(i.isFoundDocument())return new K_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new K_(t._firestore,r,n._key,null,n.converter);throw jh()}))}},{key:"set",value:function(e,t,n){var r=wx(e,this._firestore),i=mx(r.converter,t,n),a=T_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=wx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ie(t))||t instanceof v_?O_(this._dataReader,"Transaction.update",i._key,t,n,o):P_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=wx(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Rx(e,t){return function(e,t){var n=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function r(){var i;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Sb(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new kb(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(u_(e=Kb(e,o_)),(function(n){return t(new Nx(e,n))}))}function Dx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new N_("arrayUnion",t)}function Px(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new R_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ph=e}(Be),Pe(new ce("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new o_(i,new Yh(e.getProvider("auth-internal")),new Zh(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Qe(Rh,"3.4.1",e),Qe(Rh,"3.4.1","esm2017")}();function Ox(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Wh("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Lx(){if("undefined"===typeof Uint8Array)throw new Wh("unimplemented","Uint8Arrays are not available in this environment.")}function Mx(){if("undefined"==typeof atob)throw new Wh("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Fx=function(){function e(t){s(this,e),this._delegate=t}return l(e,[{key:"toBase64",value:function(){return Mx(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Lx(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Mx(),new e(y_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Lx(),new e(y_.fromUint8Array(t))}}]),e}();function Ux(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=E(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Vx=function(){function e(){s(this,e)}return l(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){p_(e=Kb(e,o_));var n=u_(e),r=e._freezeSettings(),i=new pb;return c_(n,i,new hb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){p_(e=Kb(e,o_));var t=u_(e),n=e._freezeSettings(),r=new pb;return c_(t,r,new db(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Wh(zh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Kh;return e._queue.enqueueAndForgetEvenWhileRestricted(oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=oe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jy.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,jy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()($m(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),jx=function(){function e(t,n,r){var i=this;s(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ub||(this._appCompat=t)}return l(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Uh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Yb(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return l_(this._delegate)}},{key:"disableNetwork",value:function(){return f_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&qb("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Kh;return e.asyncQueue.enqueueAndForget(oe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Dw,n.next=3,Db(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(u_(e=Kb(e,o_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Sx(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Wh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new eI(this,Zb(this._delegate,e))}catch(t){throw Hx(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Kx(this,e_(this._delegate,e))}catch(t){throw Hx(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Xx(this,function(e,t){if(e=Kb(e,Qb),jb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wh(zh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Xb(e,null,function(e){return new fp(hd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Hx(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Rx(this._delegate,(function(n){return e(new Bx(t,n))}))}},{key:"batch",value:function(){var e=this;return u_(this._delegate),new zx(new kx(this._delegate,(function(t){return Cx(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return h_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return d_(this._delegate,e).then((function(e){return e?new Xx(t,e):null}))}}]),e}(),qx=function(e){h(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return l(n,[{key:"convertBytes",value:function(e){return new Fx(new y_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Kx.forKey(t,this.firestore,null)}}]),n}(yx);var Bx=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new qx(t)}return l(e,[{key:"get",value:function(e){var t=this,n=tI(e);return this._delegate.get(n).then((function(e){return new Yx(t._firestore,new Y_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=tI(e);return n?(Ox("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tI(e);return this._delegate.delete(t),this}}]),e}(),zx=function(){function e(t){s(this,e),this._delegate=t}return l(e,[{key:"set",value:function(e,t,n){var r=tI(e);return n?(Ox("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Wx=function(){function e(t,n,r){s(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return l(e,[{key:"fromFirestore",value:function(e,t){var n=new J_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jx(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new qx(t),n),i.set(n,a)),a}}]),e}();Wx.INSTANCES=new WeakMap;var Kx=function(){function e(t,n){s(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qx(t)}return l(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new eI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new eI(this.firestore,Zb(this._delegate,e))}catch(t){throw Hx(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ie(e))instanceof Jb&&t_(this._delegate,e)}},{key:"set",value:function(e,t){t=Ox("DocumentReference.set",t);try{return t?Ix(this._delegate,e,t):Ix(this._delegate,e)}catch(n){throw Hx(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ex(this._delegate,e):Ex.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Hx(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Cx(Kb(e.firestore,o_),[new ov(e._key,Kp.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Gx(n),a=Qx(n,(function(t){return new Yx(e.firestore,new Y_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Tx(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?_x(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Kb(e,Jb);var t=Kb(e.firestore,o_);return Lb(u_(t),e._key,{source:"server"}).then((function(n){return Ax(t,e,n)}))}(this._delegate):function(e){e=Kb(e,Jb);var t=Kb(e.firestore,o_);return Lb(u_(t),e._key).then((function(n){return Ax(t,e,n)}))}(this._delegate),t.then((function(e){return new Yx(n.firestore,new Y_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Wx.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Wh("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Jb(n._delegate,r,new Sd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Jb(n._delegate,r,t))}}]),e}();function Hx(e,t,n){return e.message=e.message.replace(t,n),e}function Gx(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Ux(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Qx(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Ux(e[0])?e[0]:Ux(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Yx=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return l(e,[{key:"ref",get:function(){return new Kx(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Z_(this._delegate,e._delegate)}}]),e}(),Jx=function(e){h(n,e);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||jh()}(void 0!==t),t}}]),n}(Yx),Xx=function(){function e(t,n){s(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qx(t)}return l(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,nx(this._delegate,function(e,t,n){var r=t,i=G_("where",e);return new rx(i,r,n)}(t,n,r)))}catch(i){throw Hx(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,nx(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=G_("orderBy",e);return new ix(n,t)}(t,n)))}catch(r){throw Hx(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,nx(this._delegate,function(e){return Hb("limit",e),new ax("limit",e,"F")}(t)))}catch(n){throw Hx(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,nx(this._delegate,function(e){return Hb("limitToLast",e),new ax("limitToLast",e,"L")}(t)))}catch(n){throw Hx(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,nx(this._delegate,ux.apply(void 0,arguments)))}catch(t){throw Hx(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,nx(this._delegate,sx.apply(void 0,arguments)))}catch(t){throw Hx(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,nx(this._delegate,lx.apply(void 0,arguments)))}catch(t){throw Hx(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,nx(this._delegate,fx.apply(void 0,arguments)))}catch(t){throw Hx(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return n_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?xx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Kb(e,Xb);var t=Kb(e.firestore,o_),n=u_(t),r=new bx(t);return Mb(n,e._query,{source:"server"}).then((function(n){return new X_(t,r,e,n)}))}(this._delegate):function(e){e=Kb(e,Xb);var t=Kb(e.firestore,o_),n=u_(t),r=new bx(t);return ex(e._query),Mb(n,e._query).then((function(n){return new X_(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Zx(n.firestore,new X_(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Gx(n),a=Qx(n,(function(t){return new Zx(e.firestore,new X_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Tx(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Wx.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),$x=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return l(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Jx(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Zx=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return l(e,[{key:"query",get:function(){return new Xx(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Jx(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new $x(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Jx(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Z_(this._delegate,e._delegate)}}]),e}(),eI=function(e){h(n,e);var t=g(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return l(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Kx(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Kx(this.firestore,void 0===e?e_(this._delegate):e_(this._delegate,e))}catch(t){throw Hx(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Kb(e.firestore,o_),r=e_(e),i=mx(e.converter,t);return Cx(n,[T_(E_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kp.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Kx(t.firestore,e)}))}},{key:"isEqual",value:function(e){return t_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Wx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Xx);function tI(e){return Kb(e,Jb)}var nI=function(){function e(){s(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=A(v_,n)}return l(e,[{key:"isEqual",value:function(e){return(e=ie(e))instanceof v_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(pd.keyField().canonicalString())}}]),e}(),rI=function(){function e(t){s(this,e),this._delegate=t}return l(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new A_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new S_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Dx.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Px.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new D_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),iI={Firestore:jx,GeoPoint:g_,Timestamp:od,Blob:Fx,Transaction:Bx,WriteBatch:zx,DocumentReference:Kx,DocumentSnapshot:Yx,Query:Xx,QueryDocumentSnapshot:Jx,QuerySnapshot:Zx,CollectionReference:eI,FieldPath:nI,FieldValue:rI,setLogLevel:function(e){!function(e){Oh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ce("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},iI)))}(e,(function(e,t){return new jx(e,t,new Vx)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(rt);rt.initializeApp({apiKey:"AIzaSyD99zXo_--7CM0JcXA9NhvbzVvGx2CfscM",authDomain:"expensecalculator-1ca6a.firebaseapp.com",projectId:"expensecalculator-1ca6a",storageBucket:"expensecalculator-1ca6a.appspot.com",messagingSenderId:"1073269710223",appId:"1:1073269710223:web:c70c5b6b35cc6d8706bffa",measurementId:"G-T6T88070C7"});var aI=rt,oI=function(e){var t=e.App,n=function(){aI.auth().onAuthStateChanged((function(e){e?t.setState({isSignedIn:!0}):t.setState({isSignedIn:!1})}))};return(0,k.jsx)("button",{onClick:function(){aI.auth().signInWithPopup(new aI.auth.GithubAuthProvider).then(n()).catch((function(e){console.log(e)}))},children:"\u0412\u043e\u0439\u0442\u0438"})},uI=function(e){h(r,e);var n=g(r);function r(){var e;s(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={transactions:JSON.parse(localStorage.getItem("calcMoney"))||[],description:"",moneyAmount:"",totalIncome:0,totalExpenses:0,totalBalance:0,isSignedIn:!1},e.addTransaction=function(t){var n=u(e.state.transactions);n.push({id:"cmr".concat((+new Date).toString(16),"key"),description:e.state.description,moneyAmount:e.state.moneyAmount,add:t}),e.setState({transactions:n,description:"",moneyAmount:""},e.getTotalBalance)},e.addAmount=function(t){e.setState({moneyAmount:parseFloat(t.target.value)})},e.addDescription=function(t){e.setState({description:t.target.value})},e.getExpenses=function(){return e.state.transactions.reduce((function(e,t){return t.add?e:t.moneyAmount+e}),0)},e.deleteTransaction=function(t){var n=e.state.transactions.filter((function(e){return e.id!==t}));e.setState({transactions:n},e.getTotalBalance)},e}return l(r,[{key:"signOut",value:function(){aI.auth().signOut()}},{key:"componentWillMount",value:function(){this.getTotalBalance()}},{key:"componentDidUpdate",value:function(){this.addToStorage()}},{key:"getIncome",value:function(){return this.state.transactions.filter((function(e){return e.add})).reduce((function(e,t){return t.moneyAmount+e}),0)}},{key:"getTotalBalance",value:function(){var e=this.getIncome(),t=this.getExpenses(),n=e-t;this.setState({totalIncome:e,totalExpenses:t,totalBalance:n})}},{key:"addToStorage",value:function(){localStorage.setItem("calcMoney",JSON.stringify(this.state.transactions))}},{key:"render",value:function(){return!0===this.state.isSignedIn?(0,k.jsxs)(t.Fragment,{children:[(0,k.jsxs)("header",{children:[(0,k.jsx)("h1",{children:"\u041a\u043e\u0448\u0435\u043b\u0435\u043a"}),(0,k.jsx)("h2",{children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432"})]}),(0,k.jsx)("main",{children:(0,k.jsxs)("div",{className:"container",children:[(0,k.jsx)(w,{totalIncome:this.state.totalIncome,totalExpenses:this.state.totalExpenses,totalBalance:this.state.totalBalance}),(0,k.jsx)(_,{transactions:this.state.transactions,deleteTransaction:this.deleteTransaction}),(0,k.jsx)(x,{addTransaction:this.addTransaction,addDescription:this.addDescription,addAmount:this.addAmount,description:this.state.description,moneyAmount:this.state.moneyAmount}),(0,k.jsx)("button",{onClick:this.signOut,children:"\u0412\u044b\u0439\u0442\u0438"})]})})]}):(0,k.jsxs)(t.Fragment,{children:[(0,k.jsxs)("header",{children:[(0,k.jsx)("h1",{children:"\u041a\u043e\u0448\u0435\u043b\u0435\u043a"}),(0,k.jsx)("h2",{children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432"})]}),(0,k.jsx)(oI,{App:this})]})}}]),r}(t.Component),sI=uI;r.render((0,k.jsx)(t.StrictMode,{children:(0,k.jsx)(sI,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.c286120e.js.map